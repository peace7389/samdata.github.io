<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Android Basics and User Interfaces</title>
<link href="../css/programming_notes_v1.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="../scripts/programming_notes_v1.js"></script>
<link rel="shortcut icon" href="../favicon.ico" type="image/x-icon" /></head>

<body>

<div id="wrap-outer">

<!-- header filled by JavaScript -->
<div id="header" class="header-footer"><p>&nbsp;</p></div>

<div id="wrap-inner">

<div id="wrap-toc">
<h5>TABLE OF CONTENTS <a id="show-toc" href="Android_BasicsUI.html#show-toc">(HIDE)</a></h5>
<div id="toc"></div>  <!-- for showing the "Table of Content" -->
</div>

<div id="content-header">
<h1>Android Programming</h1>
<h2>Basics: User Interfaces and Activities</h2>
</div>

<div id="content-main">

<h3>Introduction</h3>

<p>Android is an <em>Operating System for mobile devices</em> developed by Google, which is built upon Linux kernel. Android competes with Apple's iOS (for iPhone/iPad), RIM's Blackberry(?),  Microsoft's Windows Phone(?), Symbian OS(?), and many other proprietary mobile OSes.</p>

<h5>Brief History and Versions</h5>

<ul>
<li>In 2005, Google acquired a start-up called Android Inc. and started to work on the Android platform, in particular the Dalvik Java Virtual Machine (JVM).</li>

<li>In 2007, a group of mobile handset producers and computing companies (including Google, Samsung, Motorola, Sony Ericsson, Intel,  T-mobile, and Vodaphone) formed the <em><q>Open Handset Alliance</q></em> (OHA) to develop an open and non-proprietary mobile operating platform. The Android beta version was released in November 2007.</li>

<li>In September 2008, Google released Android SDK 1.0, and placed it under open-source license. Android 1.x  did not support soft keyboard and required physical keypad. Android 1.5 (codenamed Cupcake - Android versions are codenamed after desserts) fixed this problem and including new features such as media recording and playback, widgets, and added supports to native codes. Android 1.6 (Donut) introduced support for different screen resolutions.</li>
<li>In October 2009, Google released Android SDK 2.0 (Ã‰clair), which supports HTML 5, flash and multi-touch screens. Android 2.2 (Froyo) added just-in-time (JIT)
  compilation to the Dalvik virtual machine, which greatly improves the performance. Android 2.3 (Gingerbread) added supports for the OpenGL ES 2.0, and a new concurrent garbage collector to the Dalvik VM.</li>

<li>In March 2011, Google released Android SDK 3.0 (Honeycomb) - the first <em>tablet-only</em> Android platform. Android 3.0 supports wide screen and multi-core processors, and USB peripherals. Android 3.0 does not run on smart phones.</li>
<li>Android 4.0 (Ice Cream Sandwich) was released in October 2011, which is the result of merging Honeycomb (3.1) and Gingerbread (2.3) to support both smart phones and tablets.</li>
<li>Android 4.1 (Jelly Bean) was released in June 2012. It introduces the new features such as new Google search experience.</li>
<li>Android 4.4 (Kitkat) was released in October 2013, which is optimized to run on a greater range of devices.</li>
<li>Android 5 (Lollipop) was released in November 2014.</li>
<li>Android 6 (Marshmallow) was released in October 2015.</li>
<li>Android 7 (Nougat) was released in August 2016; and Android 7.1 in October 2016.</li>
<li>Android 8 (Oreo) was released in August 2017; and Android 8.1 in December 2017.</li>
<li>Android 9 (Pie) was released in August 2018.</li>
<li>Android 10 (Q) was released in September 2019.</li>
<li>Android 11 (R) was released in September 2020.</li>
<li>Android 12 (S) was released in October 2021.</li>
<li>Android 13 (Tiramisu) was released in August 2022.</li>
<li>Android 14 (Upside Down Cake) was released in October 2023.</li>
<li>Android 15 (Vanilla Ice Cream)?</li>
</ul>

<p>Android platform is identified by two numbers: a version name (<code>x.y</code>) and an API level number (a running integer starts from 1, which is used in the Android Market/Google Play to identify new version).</p>

<table class="table-zebra" style="width:60%">
<tr>
<th>Year</th>
<th>Version</th>
<th>Codename</th>
<th>API Level</th>
</tr>

<tr>
  <td>2009, Apr</td>
<td>1.5</td>
<td>Cupcake</td>
<td>3</td>
</tr>

<tr>
  <td>2009, Sep</td>
<td>1.6</td>
<td>Donut</td>
<td>4</td>
</tr>

<tr>
  <td>2009, Oct</td>
<td>2.0 - 2.1</td>
<td>Eclair</td>
<td>7</td>
</tr>

<tr>
  <td>2010, Mar</td>
<td>2.2</td>
<td>Froyo</td>
<td>8</td>
</tr>

<tr>
  <td>2010, Dec</td>
<td>2.3 - 2.3.2</td>
<td rowspan="2">Gingerbread</td>
<td>9</td>
</tr>

<tr>
  <td>&nbsp;</td>
<td>2.3.3 - 2.3.7</td>
<td>10</td>
</tr>

<tr>
<td>2011, Feb</td>
<td>3.0</td>
<td rowspan="3">Honeycomb</td>
<td>11</td>
</tr>

<tr>
<td>&nbsp;</td>
<td>3.1</td>
<td>12</td>
</tr>

<tr>
<td>&nbsp;</td>
<td>3.2</td>
<td>13</td>
</tr>

<tr>
  <td>2011, Oct</td>
<td>4.0 - 4.0.2</td>
<td rowspan="2">Ice Cream Sandwich</td>
<td>14</td>
</tr>

<tr>
  <td>&nbsp;</td>
<td>4.0.3 - 4.0.4</td>
<td>15</td>
</tr>

<tr>
  <td>2012, Jun</td>
<td>4.1</td>
<td rowspan="3">Jelly Bean</td>
<td>16</td>
</tr>
<tr>
  <td>&nbsp;</td>
  <td>4.2</td>
  <td>17</td>
</tr>
<tr>
  <td>&nbsp;</td>
  <td>4.3</td>
  <td>18</td>
</tr>
<tr>
  <td>2013, Oct</td>
  <td>4.4</td>
  <td>KitKat</td>
  <td>19</td>
</tr>
<tr>
  <td>2014, Nov</td>
  <td>5.0</td>
  <td rowspan="2">Lollipop</td>
  <td>21</td>
</tr>
<tr>
  <td>2015, Mar</td>
  <td>5.1</td>
  <td>22</td>
</tr>
<tr>
  <td>2015, Oct</td>
  <td>6.0</td>
  <td>Marshmallow</td>
  <td>23</td>
</tr>
<tr>
  <td>2016, Aug</td>
  <td>7.0</td>
  <td rowspan="2">Nougat</td>
  <td>24</td>
</tr>
<tr>
  <td>2016, Oct</td>
  <td>7.1</td>
  <td>25</td>
</tr>
<tr>
  <td>2017, Aug</td>
  <td>8.0</td>
  <td rowspan="2">Oreo</td>
  <td>26</td>
</tr>
<tr>
  <td>2017, Dec</td>
  <td>8.1</td>
  <td>27</td>
</tr>
<tr>
  <td>2018, Aug</td>
  <td>9</td>
  <td>Pie</td>
  <td>28</td>
</tr>
<tr>
  <td>2019, Sep</td>
  <td>10</td>
  <td>10 (Q)</td>
  <td>29</td>
</tr>
<tr>
  <td>2020, Sep</td>
  <td>11</td>
  <td>11 (R)</td>
  <td>30</td>
</tr>
<tr>
  <td>2021, Oct</td>
  <td>12, 12L</td>
  <td>12 (S)</td>
  <td>31, 32</td>
</tr>
<tr>
  <td>2022, Aug</td>
  <td>13</td>
  <td>Tiramisu</td>
  <td>33</td>
</tr>
<tr>
<td>2023, Oct</td>
<td>14</td>
<td>Upside Down Cake</td>
<td>34</td>
</tr>
<tr>
<td>2024, Feb (preview)</td>
<td>15</td>
<td>Vanilla Ice Cream</td>
<td>&nbsp;</td>
</tr>

</table>

<img src="images/Android_robot.png" alt="Android Robot" height="120" class="image-float-left" />
<img src="images/Android_Logo2019.png" alt="Android Robot" height="120" class="image-float-left" />

<p>The <em>mascot</em> for Android is a little green robot, who is still nameless. A new version was created in 2019 with the introduction of Android 10 (Q) - and no more desserts.</p>

<h3 class="float-clear">The Android Platform</h3>

<img class="image-center" src="images/Android_StackDetails.png" alt="Android Stack" />

<h5>Linux Kernel and Device Drivers</h5>

<p>The Linux kernel is responsible for the OS functions, such as processor, memory, file, power management. The device drivers includes display, camera, keypad, flash memory, communications (GSM telephony, 3G, WiFi, bluetooth, Near-Field Contact-less communication), accessories (GPS, compass, accelerator), and etc.</p>


<h5>Dalvik Virtual Machine</h5>

<p>Dalvik VM (DVM) was developed by Google, led by Dan Bornstein, to optimize the performance of Java applications on mobile devices with limited capabilities (Dalvik is actually the name of a town in Iceland). DVM takes the traditional Java classes (&quot;<code>.class</code>&quot;) and combines them into one or more Dalvik Executable (&quot;<code>.dex</code>&quot;) files. By removing duplicate information among the Java classes, it reduces the resultant file size compared with the traditional JAR file. However, as a result, the DVM is not binary-compatible with Java Virtual Machine (JVM). You need to convert the &quot;<code>.class</code>&quot; into &quot;<code>.dex</code>&quot;.</p>

<p>Android 2.2 (Froyo) added a JIT (Just-in-time) compiler and Android 2.3 (Gingerbread) added a concurrent garbage collector to improve the runtime performance.</p>
<p>Android SDK uses XML file extensively. All the XML files are compiled into binary files to improve the performance.</p>

<h5>Native C/C++ Libraries</h5>

<p>The native C/C++ libraries include:</p>
<ul>
<li>Google's Skia: for 2D graphics support (also used in Google's Chrome).</li>
<li>Khronos Group's OpenGL ES: for 3D graphics support.</li>
<li>WebKit: for browser support (also used in Google's Chrome).</li>
<li>FreeType: for font support.</li>
<li>SSL (Secure Socket Layer): for secure communications.</li>
<li>SQLite: a lightweight relational database system.</li>
<li>PacketVideo's OpenCore: video/audio record and playback in various format.</li>
<li>Others.</li>
</ul>

<h5>Android Java API Packages</h5>

<p>The API reference is available @ <a href="http://developer.android.com/reference/packages.html">http://developer.android.com/reference/packages.html</a>.</p>
<ul>
<li><code>android.app</code>:</li>
<li><code>android.view</code>, <code>android.widget</code>:</li>
<li><code>android.graphics</code>, <code>android.animation</code>:</li>
<li><code>android.media</code>, <code>android.speech</code>, <code>android.telephony</code>:</li>
<li><code>android.net</code>:</li>
<li><code>android.bluetooth</code>, <code>android.location</code>:</li>
<li><code>android.provider</code>, <code>android.content</code>, <code>android.database</code>:</li>
<li><code>android.gesture</code>:</li>
<li><code>android.sax</code>:</li>
<li><code>android.security</code>:</li>
<li><code>android.test</code>, <code>junit.framework</code>, <code>junit.runner</code>:</li>
<li><code>android.text</code>, <code>android.util</code>:</li>
<li><code>java.lang</code>, <code>java.io</code>, <code>java.nio</code>,  <code>java.text</code>, <code>java.util</code></li>
<li><code>java.net</code>, <code>javax.net</code>:</li>
<li><code>java.security</code>, <code>java.crypto</code>:</li>
<li><code>java.sql</code>, <code>javax.sql</code>:</li>
<li><code>javax.xml</code>, <code>org.json</code>, <code>org,w3c.dom</code>, <code>org.xml.sax</code>, <code>org.xmlpull</code>:</li>
<li><code>org.apache.http</code>:</li>
</ul>

<p>Android supports a subset of JavaSE (no AWT and Swing). There is no JavaME library in Android.</p>

<h5>Kotlin Programming Language</h5>
<p>In May 2017, Google announced support for Android app development in the Kotlin programming language, supported in Android Studio 3.0. &quot;Kotlin is a statically-typed programming language that runs on the Java virtual machine and also can be compiled to JavaScript source code. While the syntax is not compatible with Java, Kotlin is designed to interoperate with Java code and is reliant on Java code from the existing Java Class Library, such as the collections framework.&quot;</p>

<h3>Android Application Framework</h3>

<p>Android application framework is radically different from traditional programming frameworks, such as C/C++ and Java. There is no single entry point (you can't find the <code>main()</code>?!). This is because the Android apps are targeted at mobile devices with limited capabilities. &quot;Reusing&quot; components from other applications is crucial to reduce their footprint.</p>
<p>Android applications consist of components, and can communicate and use components of other applications seamlessly (e.g., making a phone call, or taking a photo), without including the codes of the other applications or   linking to it. An Android app can simply start other application's component by instantiate Java objects for that component. An Android application does not have a single entry point (there is no <code>main()</code> method), but consists of components that can be instantiated and run as the need arises.</p>
<p>There are four main types of application components:</p>

<ol>
<li>Activity: An activity has a <em>single screen</em>, which usually composes of one of more views. An activity <em>interacts</em> with the user to perform one task.</li>
<li>Service: Background processes (similar to Windows' service or Unix's daemon), e.g., playing music.</li>
<li>Broadcast Receiver: Receives and reacts to system messages, e.g., low battery life.</li>
<li>Content Provider: Android defines a <em>content provider</em> mechanism for applications to share data without exposing the underlying  implementation. Via content provider, your application can share data with other applications, or use data from another application (e.g., from SQLite Database).</li>
</ol>


<h3>Android Programming Basics</h3>

<h4>Android Developer Website</h4>

<p>The Android developer website @ <a href="https://developer.android.com/index.html">https://developer.android.com</a>, is crucial for developing Android app. It has three main items: Design, Develop, and Distribute. Begin with the &quot;Develop&quot;, which contains Android Training, API Guides, Reference and Tools. In this article, I shall follow closely with &quot;Android Training&quot; and &quot;API Guides&quot;, but explain in my perspective.</p>

<h4>Revisit Hello-world</h4>

<p>(Stop the current app. Close the current project. Open the &quot;Hello Android&quot; app created earlier.)</p>
<p>Let us revisit the Hello-world program, reproduced as follow:</p>

<pre class="color-example">
package ......;
import ......
<span class="color-new">import android.widget.TextView;</span>
   
public class <span class="color-new">MainActivity extends ...Activity</span> {
    <span class="color-comment">/** Callback when the activity is first created. */</span>
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        <span class="color-new">TextView textView = new TextView(this);</span> <span class="color-comment">// Construct a TextView UI component</span>
        <span class="color-new">textView.setText(&quot;<strong>hello world, from my Java codes!</strong>&quot;);</span>   <span class="color-comment">// Set text for TextView</span>
        <span class="color-new">setContentView(textView);</span>               <span class="color-comment">// This Activity sets its content to the TextView</span>
    }

    ......
}</pre>

<h5>Activity</h5>
<p>An Android application typically comprises several activities (screens). An activity has a <em>single screen</em>, which usually composes of one of more views. An activity, as its name implied, <em>interacts</em> with the user to do ONE (and only ONE) thing, such as viewing data, creating data, or editing data.</p>

<h5>View</h5>
<p>Views are UI <em>components</em> (or widget, or control) (such as button, label, text field) as well as <em>containers</em> (of components), that could be used to build the user interface. In the Hello-world, we use a view called <code>TextView</code> to display the message.</p>
<p>Android supports many core JDK packages, except graphics packages AWT and Swing. It provides its own 2D graphics supports, via views and widgets. It supports 3D graphics via OpenGL ES.</p>

<h5>Fragment</h5>
<p>Fragment was introduced in Android 3.0 to support wider screen, which could be difficult to put all the functions in a single activity. Fragments are like <em>sub-activities</em>. An activity can display one or more fragments on the screen at the same time. For a smaller screen, an activity is more likely to contain just one fragment.</p>

<h5><span class="font-code">AndroidManifest.xml</span></h5>
<p>Each application has a manifest, or <em>application descriptor</em>, to describe its contents, resources and behaviors, such as the list of activities, services, intents and permissions. For example, the hello-world's manifest is as follow:</p>

<pre class="color-example">
&lt;?xml ......?&gt;
&lt;<span class="color-new">manifest</span> ......&gt;
 
    <span class="color-new">&lt;application</span>
        ......
        android:label=&quot;<span class="color-new">Hello Android</span>&quot;
        ......&gt;
        <span class="color-new">&lt;activity</span>
            <span class="color-new">android:name=&quot;.MainActivity&quot;</span>&gt;
            &lt;intent-filter&gt;
                &lt;action android:name=&quot;android.intent.action.<span class="color-new">MAIN</span>&quot; /&gt;
                &lt;category android:name=&quot;android.intent.category.<span class="color-new">LAUNCHER</span>&quot; /&gt;
            &lt;/intent-filter&gt;
        &lt;/activity&gt;
    &lt;/application&gt;
&lt;/manifest&gt;</pre>


<ul>
<li>The root element <code>&lt;manifest&gt;</code> defines the XML name space and Java package name. It contains one <code>&lt;application&gt;</code>.</li>

<li>The <code>&lt;application&gt;</code> element specifies the <em>icon</em>, <em>label</em> and <em>theme</em> for this app. It contains one or more <code>&lt;activity&gt;</code>.</li>

<li>This application has one activity. The <code>&lt;activity&gt;</code> element declares its <em>Java class name</em> (&quot;<code>MainActivity</code>&quot; in package <code>com.example.helloandroid</code>); and <em>label</em> (to be displayed as the screen title). It may contain <code>&lt;intent-filter&gt;</code> to declare the intent for this activity.</li>

<li>The <code>&lt;intent-filter&gt;</code> declares that this activity is the entry point (<code>android.intent.action.MAIN</code>) of the application. This activity is to be added to the application launcher (<code>android.intent.category.LAUNCHER</code>).</li>
</ul>

<p>(The Android Application Descriptor file <code>AndroidManifest.xml</code> is similar to Web Application Deployment Descriptor <code>web.xml</code> in a JavaEE web application.)</p>

<h5>Intent</h5>
<p>An intent, as its name implied, declares an <em>intention</em> to do something, such as launching an activity, broadcasting a message, starting a service, display a web page, dialing or answering a phone call.  An intent could be initiated by your application, or by the system to notify your application about a specific event (such as an incoming phone call or text message). Intents are like &quot;glue&quot; that enable different activities from different applications to work together.</p>

<p>For example, the <code>&lt;intent-filter&gt;</code> in the above manifest declares that this activity is the entry point (<code>android.intent.action.MAIN</code>) of the application, and it shall be added to be application launcher (<code>android.intent.category.LAUNCHER</code>).</p>

<h4>Activities</h4>

<p>As mentioned, an <em>activity</em> is usually presented in a single SCREEN composing of views (UI components, widgets or controls), which interacts with the users to perform a single, focused task (e.g., viewing information, editing data, or entering data).</p>

<p>An Android app typically has one or more activities (one or more screens). One of the activities is marked as the startup activity, which in turn starts the next activity, via the <em>intent</em>.</p>
<p> To create an activity, we extend the <code>android.app.Activity</code> class (or <code>androidx.appcompat.app.AppCompatActivity</code> from Android 13), and override some of its methods (in particular <code>onCreate()</code>) to provide our own implementation. A typical template of an <code>Activity</code> is as follows:</p>

<pre class="color-example">
package com.example.......;
   
import android.app.Activity;
import android.os.Bundle;
   
public class <span class="color-new">MainActivity extends ...Activity</span> {  <span class="color-comment">// extends AppCompatActivity from Android 13</span>
    <span class="color-comment">/** Callback when the activity is first created. */</span>
    @Override
    protected void <span class="color-new">onCreate</span>(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        ......
        setContentView(......); <span class="color-comment">// Set the content-view of this Activity's screen</span>
 
        <span class="color-comment">// To use XML Layout, use
        //   setContentView(R.layout.xxx);
        // to map layout specified in res/layout/xxx.xml</span>
    }
}</pre>

<p>You can set this activity's content-view grammatically or via a XML layout file.</p>

<h3>User Interface - Views, ViewGroups and Resources</h3>

<p>An <code>Activity</code> interacts with the user, via a visual UI on a screen. The UI is placed on the <code>Activity</code> via the  <code>Activity</code>'s <code>setContentView()</code> method. In Android, the UI composes of <code>View</code> and <code>ViewGroup</code> objects, organized in a single view-tree structure.</p>
<p> A <code>View</code> is an interactive UI component (or widget or control),  such as button and text field. It controls a <em>rectangular area</em> on the screen. It is responsible for drawing itself and   handling events (such as clicking, entering texts). Android provides many ready-to-use <code>View</code>s such as <code>TextView</code>, <code>EditText</code>, <code>Button</code>, <code>RadioButton</code>, etc, in package <code>android.widget</code>. You can also create your custom <code>View</code> by extending <code>android.view.View</code>.</p>
<p> A <code>ViewGroup</code> is an <em>invisible container</em> used to <em>layout</em> the <code>View</code> components. Android provides many ready-to-use <code>ViewGroup</code>s such as <code>LinearLayout</code>, <code>RelativeLayout</code>, <code>TableLayout</code> and <code>GridLayout</code> in package <code>android.widget</code>. You can also create your custom <code>ViewGroup</code> by extending from <code>android.view.ViewGroup</code>. </p>
<p> <code>View</code>s and <code>ViewGroup</code>s are organized in a single tree structure called <em>view-tree</em>. You can create a view-tree either using programming codes or describing it in a XML layout file. XML layout is recommended as it separates the presentation view  from the controlling logic, which provides modularity and flexibility in your program design. Once a view-tree is constructed, you can add the <em>root</em> of the view-tree to the <code>Activity</code> as the content view via <code>Activity</code>'s <code>setContentView()</code> method.</p>

<p>There are two approaches in constructing the UI:</p>
<ol>
<li>Via the XML Layout file: For example, in &quot;<a href="Android_HowTo.html#androidXML">Hello-world in XML Layout</a>&quot;, we layout all the UI components in an XML file. This approach is more flexible, with the view separated from the business logic, and therefore recommended.</li>
<li>Via the programming codes, as in the above Hello-world example. Use this approach only if absolutely necessary.</li>
</ol>


<h4>Example 1: <span class="font-code">View</span>s (<span class="font-code">TextView</span>, <span class="font-code">RadioButton</span>, <span class="font-code">Button</span>) and <span class="font-code">ViewGroup</span> (<span class="font-code">LinearLayout</span>)</h4>

<img class="image-float-right" src="images/Basics_Counter.png" alt="Counter" />

<p>Let's illustrate the view-tree with a simple &quot;Counter&quot; example as illustrated.</p>

<p>The UI consists of a &quot;text field&quot; (<code>android.widget.TextView</code>), two &quot;radio buttons&quot; (<code>android.widget.RadioButton</code>) and a &quot;button&quot; (<code>android.widget.Button</code>), arranged in &quot;linear layout&quot; (<code>android.widget.LinearLayout</code>).</p>
<p>Close the previous project, via &quot;File&quot; &rArr; Close Project.</p>

<p>&quot;Start an Android Studio project&quot; (or &quot;New Project&quot;), &quot;Empty View Activity&quot;, with &quot;Name&quot; of &quot;<code>Counter</code>&quot;.</p>

<h5>Step 1a: Define Layout in &quot;<span class="font-code">res\layout\activity_main.xml</span>&quot;</h5>

<p>Expand the project node, and REPLACE the &quot;<code>res\layout\activities_main.xml</code>&quot; with the following codes:</p>

<pre class="color-example">
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;<span class="color-new">LinearLayout</span> xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;
    xmlns:tools=&quot;http://schemas.android.com/tools&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;match_parent&quot;
    android:orientation=&quot;vertical&quot;
    tools:context=&quot;com.example.counter.MainActivity&quot;
    tools:showIn=&quot;@layout/activity_main&quot;&gt;

    &lt;<span class="color-new">TextView</span>
        android:id=&quot;<span class="color-new">@+id/txtCountId</span>&quot;
        android:layout_width=&quot;match_parent&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:background=&quot;#cccccc&quot;
        android:gravity=&quot;end&quot;
        android:padding=&quot;<span class="color-new">@dimen/padding_medium</span>&quot;
        android:layout_margin=&quot;<span class="color-new">@dimen/padding_small</span>&quot; /&gt;
 
    &lt;<span class="color-new">RadioGroup</span>
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:orientation=&quot;horizontal&quot; &gt;
        &lt;<span class="color-new">RadioButton</span>
            android:id=&quot;<span class="color-new">@+id/rBtnUpId</span>&quot;
            android:text=&quot;<span class="color-new">@string/rBtnUpLabel</span>&quot;
            android:layout_width=&quot;wrap_content&quot;
            android:layout_height=&quot;wrap_content&quot;
            android:checked=&quot;true&quot; /&gt;
        &lt;<span class="color-new">RadioButton</span>
            android:id=&quot;<span class="color-new">@+id/rBtnDownId</span>&quot;
            android:text=&quot;<span class="color-new">@string/rBtnDownLabel</span>&quot;
            android:layout_width=&quot;wrap_content&quot;
            android:layout_height=&quot;wrap_content&quot; /&gt;
    &lt;/RadioGroup&gt;
 
    &lt;<span class="color-new">Button</span>
        android:id=&quot;<span class="color-new">@+id/btnCountId</span>&quot;
        android:text=&quot;<span class="color-new">@string/btnCountLabel</span>&quot;
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot; /&gt;
&lt;/LinearLayout&gt;</pre>


<p>There will be  errors on <code>@string</code> and <code>@dimen</code>. These are references (variables), which we shall define later.</p>

<p>The &quot;<code>activity_main.xml</code>&quot;  layout file describes a <em>view-tree</em>, composing of <code>View</code>s (UI components) and <code>ViewGroup</code>s (layouts) objects. The root of this view-tree is a <code>LinearLayout</code>, which has 3 children: <code>TextView</code>, <code>RadioGroup</code> and <code>Button</code>. <code>RadioGroup</code> is also a layout <code>ViewGroup</code> which has two children of <code>RadioButton</code>.</p>
<p>Each object has its own set of properties (or attributes). The common attributes are:</p>

<ul>
<li><span class="line-heading"><span class="font-code">id</span></span>: an identifier (or variable name) used for referencing the object. We use a special syntax <code>@+id/<em>idName</em></code>, with a <code>'+'</code>  to ask the Android SDK to generate a new ID resource. To reference an element, we use syntax <code>@id/<em>idName</em></code>, without the <code>'+'</code> sign.<br  />
For example, in the <code>Button</code> declaration, we generate a new <code>id</code> called <code>btnCountId</code> as follow:
<pre class="color-example">&lt;Button
   android:<span class="color-new">id=&quot;@+id/btnCountId&quot;</span>
   ...... /&gt;
</pre>
Once the <code>id</code> is set up, we can use this <code>id</code> to reference the object and manipulate the object in our programming codes later.</li>

<li><span class="line-heading"><span class="font-code">layout_width/layout_height</span></span>: specifying the rectangular area of the <code>View</code> or <code>ViewGroup</code>. It is recommended to use a <em>relative</em> measurement, such as <code>MATCH_PARENT</code> (as big as its parent) or <code>WRAP_CONTENT</code> (big enough to enclose its content). You can also provide an <em>absolute</em> measurement by specifying a floating-point number with a unit, e.g., 12.5dp. The available measurement units are px (pixels), dp or dip (density-independent pixels), sp (scaled pixels based on preferred font size), in (inches), and mm (millimeters).<br  />
In our example, the <code>LinearLayout</code> fills the screen width and height (<code>layout_width=&quot;match_parent&quot;</code>, <code>layout_height=&quot;match_parent&quot;</code>). The <code>TextView</code> fill the screen's width (<code>layout_width=&quot;match_parent&quot;</code>), with a height big enough to enclose its content (<code>layout_height=&quot;wrap_content&quot;</code>). The <code>RadioGroup</code>, <code>RadioButton</code> and <code>Button</code> have width and height big enough to hold their contents (<code>layout_width=&quot;wrap_content&quot;</code>, <code>layout_height=&quot;wrap_content&quot;</code>).</li>

<li><span class="line-heading"><span class="font-code">orientation=&quot;horizontal|vertical&quot;</span></span>: For layouts such as <code>LinearLayout</code> and <code>RadioGroup</code>, you can specify whether to arrange its children in horizontal or vertical orientation. In our example, the <code>LinearLayout</code> uses vertical orientation, while <code>RadioGroup</code> uses horizontal.</li>

<li><span class="line-heading"><span class="font-code">text</span></span>: specifying an initial text for a text field, or a label for a button. Instead of hardcoding the text in the XML layout file, it is recommended to provide a string reference in the form of <code>@string/<em>stringName</em></code> in the layout file,  and place the actual text in &quot;<code>res\values\strings.xml</code>&quot;. In this way, you could provide different strings for different locales (languages and countries) for internationalization (i18n) support.<br  />
For this example, we used string references <code>rBtnUpLabel</code> and <code>rBtnDownLabel</code> (for <code>RadioButton</code>) and <code>btnCountLabel</code> (for <code>Button</code>).</li>

<li><span class="line-heading">others</span>: There are many other attributes. Some attributes are applicable to a certain object only. For example, we use <code>checked=&quot;true&quot;</code> to set the initial state of a <code>RadioButton</code>. For the <code>TextView</code>, we use <code>&quot;background=&quot;#cccccc&quot;</code> to set its background to lightgrey (<code>#RRGGBB</code>), <code>gravity=&quot;right&quot;</code> to right-align the text, <code>layout_margin=&quot;@dimen/padding_small&quot;</code> to set the margin of the layout element, and <code>padding=&quot;@dimen/padding_medium&quot;</code> to set the padding between the text and the borders.</li>
</ul>

<h5>Step 1b: Define String References/Values in &quot;<span class="font-code">res\values\strings.xml</span>&quot;</h5>

<p>Next, open &quot;<code><strong>res\values\strings.xml</strong></code>&quot; to ADD the actual strings, as follows:</p>

<pre class="color-example">
&lt;?xml ......?&gt;
&lt;resources&gt;
    <span class="color-comment">&lt;!-- DO NOT REMOVE the existing entries --&gt;</span>
    ......

    <span class="color-comment">&lt;!-- ADD the following entries --&gt;</span>
    <span class="color-new">&lt;string name=&quot;btnCountLabel&quot;&gt;Count&lt;/string&gt;
    &lt;string name=&quot;rBtnUpLabel&quot;&gt;Count Up&lt;/string&gt;
    &lt;string name=&quot;rBtnDownLabel&quot;&gt;Count Down&lt;/string&gt;</span>
&lt;/resources&gt;</pre>

<p>Go back to &quot;<code>activities_main.xml</code>&quot;. Check that the &quot;red&quot; errors disappear on these string references.</p>

<h5>Step 1c: Define Dimensions in &quot;<span class="font-code">res\values\dimens.xml</span>&quot;</h5>

<p>Open &quot;<strong><code>res\values\dimens.xml</code></strong>&quot; to ADD the following dimension resources. Create a new one if it does not exist: Right-click on &quot;Values&quot; &rArr; &quot;New&quot; &rArr; &quot;Value Resource File&quot; &rArr; In &quot;File Name&quot;, enter &quot;<code>dimens</code>&quot;.</p>
<pre class="color-example">
&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;resources&gt;
    <span class="color-comment">&lt;!-- DO NOT REMOVE the existing entries --&gt;
    &lt;!-- ....... --&gt;</span>

    <span class="color-comment">&lt;!-- ADD the following entries --&gt;</span>
    <span class="color-new">&lt;dimen name=&quot;padding_medium&quot;&gt;5dp&lt;/dimen&gt;
    &lt;dimen name=&quot;padding_small&quot;&gt;3dp&lt;/dimen&gt;</span>
&lt;/resources&gt;</pre>

<p>Now, go back to &quot;<code>activities_main.xml</code>&quot;. There shall be no red errors.</p>

<h5>Step 2: Program the &quot;<span class="font-code">MainActivity.java</span>&quot;</h5>
<p>Let's complete our example by writing the <code>MainActivity.java</code> to process the button-clicks. Modify the <code>onCreate()</code> method as follows:</p>

<pre class="color-example">
package ......;
import ......;
<span class="color-comment">// Add the following imports</span>
<span class="color-new">import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;
import android.widget.RadioButton;</span>
 
public class MainActivity extends ...... {
 
   <span class="color-comment">// ADD references to UI views</span>
   <span class="color-new">private TextView txtCount;
   private RadioButton rBtnUp, rBtnDown;
   private Button btnCount;
   private int count = 0; </span> <span class="color-comment">// counter value</span>
 
   <span class="color-comment">// REPLACE the entire onCreate() as follows:</span>
   @Override
   public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.activity_main);
 
      <span class="color-comment">// Retrieve references to UI views via their ID in XML layout</span>
      <span class="color-new">rBtnUp   = (RadioButton) findViewById(R.id.rBtnUpId);
      rBtnDown = (RadioButton) findViewById(R.id.rBtnDownId);
      txtCount = (TextView)    findViewById(R.id.txtCountId);
      txtCount.setText(String.valueOf(count)); <span class="color-comment">// Display initial count</span>
 
      btnCount = (Button) findViewById(R.id.btnCountId);
      <span class="color-comment">// Process the button on-click event via an anonymous inner class</span>
      btnCount.setOnClickListener(new OnClickListener() {
         @Override
         public void onClick(View v) {
            if (rBtnUp.isChecked()) { <span class="color-comment">// Counting up</span>
               count++;
            } else if (rBtnDown.isChecked()) { <span class="color-comment">// Counting down</span>
               count--;
            }
            txtCount.setText(String.valueOf(count));
         }
      });</span>
   }
}</pre>

<ul>
<li>We set the content-view of this application to &quot;<code>R.layout.activity_main</code>&quot; which is mapped to &quot;<code>res\layout\activity_main.xml</code>&quot;.</li>

<li>We retrieve references to the <code>View</code> components, via <code>findViewById()</code> given the respective resource ID. For example, we have defined <code>id</code> for the <code>Button</code> in <code>activity_main.xml</code> as:
  <pre class="color-example">
&lt;Button android:id=&quot;@+id/<span class="color-new">btnCountId</span>&quot; ...... /&gt;
</pre>
We can retrieve the reference via <code>findViewById(R.id.<span class="color-new">btnCountId</span>)</code>.</li>
<li>For the <code>Button</code>, we set the on-click handler via <code>setOnClickListener()</code>. We use an inner class implementing <code>OnClickListener</code> and override the <code>onClick()</code> handler.</li>

</ul>

<h5>Step 3: Run the Application</h5>
<p>Now, you can run the application.</p>

<h5>Step 4: Review the Generated &quot;<span class="font-code">AndroidManifest.xml</span>&quot;</h5>

<p>Each Android application has a <em>manifest</em> file (or <em>application descriptor</em>) named <code>AndroidManifest.xml</code>, in the project's root directory. It describes the application components. The manifest is generated automatically. Do NOT change this file.</p>

<pre class="color-example">
&lt;?xml ......?&gt;
&lt;manifest ......&gt;
 
    &lt;application
        ......
        android:label=&quot;<span class="color-new">@string/app_name</span>&quot;
        ......&gt;
        &lt;activity
            android:name=&quot;<span class="color-new">.MainActivity</span>&quot; &gt;
            &lt;intent-filter&gt;
                &lt;action android:name=&quot;android.intent.action.<span class="color-new">MAIN</span>&quot; /&gt;
                &lt;category android:name=&quot;android.intent.category.<span class="color-new">LAUNCHER</span>&quot; /&gt;
            &lt;/intent-filter&gt;
        &lt;/activity&gt;
    &lt;/application&gt;
&lt;/manifest&gt;</pre>

<ul>
<li>The <code>&lt;manifest&gt;</code> element specifies the Java package name. It contains one <code>&lt;application&gt;</code> element.</li>
<li>The <code>&lt;application&gt;</code> element specifies the icon and label used in &quot;apps&quot; menu. It contains one ore more <code>&lt;activity&gt;</code> elements.</li>
<li>This application has one activity named <code>MainActivity</code> in the current package &quot;<code>.</code>&quot;. The <code>&lt;activity&gt;</code> contains <code>&lt;intent-filter&gt;</code>.</li>
<li>The <code>&lt;intent-filter&gt;</code> declares that this activity is the <em>entry point</em> (<code>android.intent.action.MAIN</code>) of the application and is included in the app launcher (<code>android.intent.category.LAUNCHER</code>).</li>
</ul>

<h5>Step 5: Using Layout XML File to Set the <span class="font-code">onClick</span> Handler</h5>

<p>Instead of using <code>Button</code>'s <code>setOnClickListener()</code> to register a listener object, it is easier to use the Layout XML file to set the <code>onClick</code> handler.</p>
<p>ADD the line in RED to the <code>activity_main.xml</code>:</p>

<pre class="color-example">
&lt;Button
   android:id=&quot;<strong>@+id/btnCountId</strong>&quot;
   android:text=&quot;<strong>@string/btnCountLabel</strong>&quot;
   android:layout_width=&quot;wrap_content&quot;
   android:layout_height=&quot;wrap_content&quot;
   <span class="color-new">android:onClick=&quot;btnCountOnClickHandler&quot;</span> /&gt;</pre>

<p>Go back to  &quot;<code>MainActivity.java</code>&quot;, you can program the event handler method <span class="color-new"><code>btnCountOnClickHandler()</code></span>, as follows:</p>

<pre class="color-example">
package ......;
 
import ......;
  
public class MainActivity ...... {
 
  <span class="color-comment"> // References to UI views</span>
   private TextView txtCount;
   private RadioButton rBtnUp, rBtnDown;
   private Button btnCount;
   private int count = 0;<span class="color-comment"> // counter value</span>
 
   @Override
   public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.activity_main);
 
     <span class="color-comment"> // Retrieve references to UI views by their id in XML layout</span>
      rBtnUp = (RadioButton) findViewById(R.id.rBtnUpId);
      rBtnDown = (RadioButton) findViewById(R.id.rBtnDownId);
      txtCount = (TextView) findViewById(R.id.txtCountId);
      txtCount.setText(String.valueOf(count));<span class="color-comment"> // Display initial count</span>
      btnCount = (Button) findViewById(R.id.btnCountId);
      <span class="color-new"><strong>// REMOVE the btnCount.setOnClickListener() method</strong></span>
   }

   <span class="color-comment">// ADD the following Button's onClick handler (set in XML layout)  </span>
   <span class="color-new">public void <strong>btnCountOnClickHandler</strong>(View v) {
      if (rBtnUp.isChecked()) {<span class="color-comment">          // Counting up</span>
         count += 2;   <span class="color-comment">// Step of 2</span>
      } else if (rBtnDown.isChecked()) {<span class="color-comment"> // Counting down</span>
         count -= 2;   <span class="color-comment">// Step of 2</span>
      }
      txtCount.setText(String.valueOf(count));
   }</span>
}</pre>

<p>Run the application. Observe that each button-click increment/decrement by 2.</p>

<p>The <code>btnCountOnClickHandler()</code> takes a <code>View</code> object as parameter, corresponding to the <code>View</code> (i.e., the <code>Button</code> or the <em>source</em> object) that triggers the handler.</p>


<p>In the earlier codes, I showed the Java &quot;listener&quot; code for the benefit of Java programmers, but you should use the <code>onClick</code> handler, as it is much easier to code.</p>

<h4>Example 2: Relative Layout</h4>

<img class="image-float-right" src="images/Basics_CounterRelative.png" alt="counter relative" />

<p>Let us modify our program to use <code>RelativeLayout</code>, instead of <code>LinearLayout</code>. In  relative layout, the UI are arranged relative to each others.</p>

<h5>Step 1: Define Layout in &quot;<span class="font-code">res\layout\activity_main_relative.xml</span>&quot;</h5>

<p>We shall use the same project (as the previous example), but specifying a new XML layout file.</p>
<p>Create a new XML layout file called <code>activity_main_relative.xml</code> in <code>res\layout</code> folder. Right-click on the <code>res\layout</code> node â‡’ New  â‡’  File &rArr; &quot;<code>activity_main_relative.xml</code>&quot; â‡’ Switch to &quot;Code&quot; view â‡’ Enter the following codes:</p>

<pre class="color-example">
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;<span class="color-new">RelativeLayout</span> xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;
    xmlns:tools=&quot;http://schemas.android.com/tools&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;match_parent&quot;
    tools:context=&quot;com.example.counter.MainActivity&quot;
    tools:showIn=&quot;@layout/activity_main&quot;&gt;
 
    &lt;TextView
        android:id=&quot;@+id/txtCountId&quot;
        android:layout_width=&quot;match_parent&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:background=&quot;#cccccc&quot;
        android:gravity=&quot;end&quot;
        android:padding=&quot;@dimen/padding_medium&quot;
        android:layout_margin=&quot;@dimen/padding_small&quot; /&gt;
 
    &lt;RadioGroup
        android:id=&quot;@+id/radioGroupId&quot;
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:orientation=&quot;horizontal&quot;
        <span class="color-new">android:layout_below=&quot;@id/txtCountId&quot;
        android:layout_alignParentRight=&quot;true&quot;
        android:layout_alignParentEnd=&quot;true&quot;</span>&gt;
        &lt;RadioButton
            android:id=&quot;@+id/rBtnUpId&quot;
            android:text=&quot;@string/rBtnUpLabel&quot;
            android:layout_width=&quot;wrap_content&quot;
            android:layout_height=&quot;wrap_content&quot;
            android:checked=&quot;true&quot; /&gt;
        &lt;RadioButton
            android:id=&quot;@+id/rBtnDownId&quot;
            android:text=&quot;@string/rBtnDownLabel&quot;
            android:layout_width=&quot;wrap_content&quot;
            android:layout_height=&quot;wrap_content&quot; /&gt;
    &lt;/RadioGroup&gt;
 
    &lt;Button
        android:id=&quot;@+id/btnCountId&quot;
        android:text=&quot;@string/btnCountLabel&quot;
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        <span class="color-new">android:onClick=&quot;btnCountOnClickHandler&quot;
        android:layout_below=&quot;@id/radioGroupId&quot;
        android:layout_alignParentRight=&quot;true&quot;
        android:layout_alignParentEnd=&quot;true&quot;</span> /&gt;
&lt;/RelativeLayout&gt;</pre>


<p>We use the <code>RelativeLayout</code> as the root element. In relative layout, we need to assign an <code>id</code> to elements that would be used for reference. As mentioned, to create an <code>id</code>, we use a special syntax <code>@+id/<em>idName</em></code>, with a <code>'+'</code> sign to ask the Android Studio to generate an <code>id</code>. To reference an element, we use the syntax <code>@id/<em>idName</em></code>.</p>

<p>In relative layout, we could use <code>layout_below</code>, <code>layout_toLeftOf</code>, <code>layout_toRightOf</code>, <code>layout_alignParentRight</code>, <code>layout_alignTop</code>, etc, to arrange a UI view relative to another view.</p>

<p>In this example, the <code>RadioGroup</code> is placed below the <code>EditText</code> and right-aligned with its parent <code>RelativeLayout</code>. The <code>Button</code> is placed below the <code>RadioGroup</code>, and also right-aligned with its parent <code>RelativeLayout</code>.</p>

<h5>Step 2: Program &quot;<span class="font-code">MainActivity.java</span>&quot;</h5>

<p>Modify as follows:</p>

<pre class="color-example">
    ......
    setContentView(R.layout.<span class="color-new">activity_main_relative</span>);
    ......</pre>

<h5>Step3: Run the app</h5>

<p>Run the app. Observe the change in layout.</p>

<h4>More Layouts</h4>
<p>Take a look at  the various UI layouts @ <a href="http://developer.android.com/guide/topics/ui/declaring-layout.html">http://developer.android.com/guide/topics/ui/declaring-layout.html</a>:</p>

<ul>
  <li><code>LinearLayout</code>: A <code>ViewGroup</code> that displays its <code>View</code> children in linear direction, either horizontally or vertically.</li>
  <li><code>RelativeLayout</code>: A <code>ViewGroup</code> that display its <code>View</code> children in relative position to each others or to the parent. e.g., below, align (top, left, right, bottom), margin (top, left, right, bottom).</li>
  <li><code>ConstraintLayout</code>: used in Graphical Layout design, which is the default for &quot;Empty View Activity&quot; - we shall cover in the next section.</li>
  <li><code>WebView</code>: A mini-browser containing web contents.</li>
<li><code>ListView</code>: A scrollable list of items.</li>
  <li><code>GridView</code>: A scrollable grid of rows and columns.</li>
  <li>many others.</li>
</ul>

<h4>Example 3: Using the Graphical Layout Tool</h4>

<p><span class="line-heading">Reference</span>: &quot;Build a UI with Layout Editor&quot; @ https://developer.android.com/studio/write/layout-editor</p>
<p>Instead of coding in XML, we can also design a user interface using the &quot;Graphical Layout Tool&quot;. We shall re-write our &quot;counter&quot; using graphical layout tool.</p>
<p>Close the previous project.</p>
<p>Start a new Android Studio project with &quot;Empty View Activity&quot;, and &quot;Name&quot; of &quot;<code>CounterGraphicTool</code>&quot;.</p>

<p>To design the UI using Graphical Layout Tool:</p>

<ol>
<li>Open (already) the &quot;<code>activity_main.xml</code>&quot;.<br />
  Select the &quot;Design&quot; view (at top-right corner).<br />
  There are two screens.  The lighter one (design view) shows the design and constraints, while the darker one (blueprint view) shows &quot;a simplified, outlined view of our UI which is useful when it comes to editing the spacing and proportions of complex layouts without the distraction of content&quot;. <br />
  Use the design view to make changes. <br />
  You can zoom in/out via <code>Ctrl '+'</code> and <code>Ctrl '-'</code>. </li>
<li>REMOVE all the existing widgets: on the lighter screen &rArr; select the screen (the &quot;hello-world&quot; TextView) &rArr; Delete.</li>
<li>Take note that the default layout is called &quot;<code>ConstraintLayout</code>&quot; (shown in the &quot;Component Tree&quot; panel on the right).</li>

<li>Add a &quot;<code>Button</code>&quot;:
  <ol>
    <li>From the &quot;Palette&quot; &rArr; Choose &quot;Common&quot; (or &quot;Buttons&quot;)  &rArr; Drag and drop a &quot;<code>Button</code>&quot; into the display.</li>
    <li>You can resize the button by dragging the 4 corners (dark square handlers).</li>
    <li>The 4 hollow circles (called anchors) at the middle of the 4 sides are meant for applying constraints for positioning the widget.</li>
    <li> Apply the &quot;top&quot; constraint to anchor the button (you need to play around - very hard to describe in words):
      <ol>
    <li>Select the hollow circle at the middle of the top edge and drag it to the top edge of the screen.</li>
    <li>Drag the &quot;button&quot; down to the desired location.</li>
    <li>The hollow circle turns solid blue to indicate constraint applied.</li>
    </ol>
    </li>
    <li>Similarly, apply the &quot;left&quot; constraint by dragging the left anchor to the left edge.</li>
    <li>For each of the widget, you MUST apply at least 2 constraints to anchor the widget to its parent or another widget - a horizontal constraint and a vertical constraint.</li>
    <li>After the constraints are applied, you can &quot;resize&quot; or &quot;re-position&quot; the button by playing with the button. Try it out.</li>
    </ol>
</li>

<li>Add a &quot;<code>TextView</code>&quot;:
<ol>
<li>From the &quot;Palette&quot;  &rArr; Choose &quot;Common&quot; (&quot;Text&quot;)  &rArr; Drag and drop a &quot;<code>TextView</code>&quot; into the display below the button.</li>
<li>Apply the &quot;top&quot; constraint to anchor it to the bottom of the button; and &quot;left&quot; constraint to anchor it to the left edge of the display.</li>
<li>You can then re-position and re-size the &quot;<code>TextView</code>&quot;.</li>
<li> Select the TextView, in the &quot;Attribute&quot; panel on the right, look for &quot;Common Attributes&quot; (below the &quot;Layout&quot;) &rArr; set &quot;<code>Text</code>&quot; (first entry) to &quot;<code>0</code>&quot; (the initial count)  &rArr; Also set the &quot;<code>ID</code>&quot; (at the top) to &quot;<code>textViewCount</code>&quot; and then &quot;Refactor&quot; to rename.</li>
<li>You can play with the rest of the &quot;Attributes&quot;, such as the colors.</li>
</ol>
</li>

<li>Study the XML codes generated, by selecting the &quot;Code&quot; view.</li>
<li>Creating a string resource by opening the &quot;<code>Strings.xml</code>&quot;, and add this entry:
<pre class="color-example">&lt;string name=&quot;count_label&quot;&gt;Count&lt;/string&gt;</pre></li>
<li>Go back to &quot;<code>activity_main.xml</code>&quot;, choose the &quot;Design&quot; view. Select the <code>Button</code>. In the &quot;Attributes&quot; panel, under &quot;Common Attributes&quot; &rArr; &quot;Text&quot;, type &quot;@&quot; or push the &quot;pick a reference&quot; (the small oval icon at the end), and select &quot;<code>@string/count_label</code>&quot; which we have just created. Notice that the label of the button changes to &quot;Count Up&quot;.</li>
<li>Select the <code>Button</code> &rArr; Under &quot;Common Attributes&quot;  &rArr; &quot;<code>onClick</code>&quot;, enter <code>&quot;btnCountOnClickHandler&quot;</code> (similar to the previous example).</li>
<li>Modify the <code>MainActivity.java</code> to include the <code>btnCountOnClickHandler()</code> method:
<pre class="color-example">
......
<span class="color-new">import android.view.View;
import android.widget.TextView;</span>

public class MainActivity extends ...... {<br />
    <span class="color-new">private TextView txtCount;
    private int count = 0;</span>

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        ......
        setContentView(<span class="color-new">R.layout.activity_main</span>);  <span class="color-comment">// maps to "res/layout/activity_main.xml"</span>
        <span class="color-new">txtCount = (TextView) findViewById(R.id.<strong>textViewCount</strong>);</span>  <span class="color-comment">// Verify the ID of the TextView from Attributes!</span>
        <span class="color-comment">// Don't change any thing below, IF ANY</span>
        ......
    }

    <span class="color-comment">// Add this event handler method after the onCreate()</span>
    <span class="color-new">public void btnCountOnClickHandler(View v) {
        count++;
        txtCount.setText(String.valueOf(count));
    }</span>

    <span class="color-comment">// Do NOT touch the existing codes, if any</span>
    ......
}</pre></li>
<li>Run the app.</li>
<li>(Optional and Difficult) Add  2 radio buttons for count up/down, by first drag and drop a &quot;Radio Group&quot; from &quot;Container&quot;, then two &quot;Radio Button&quot; from &quot;Widgets&quot; inside the &quot;Radio Group&quot;. Modify the <code>MainActivity.java</code> to include the radio buttons (study the codes in the previous example!!!)</li>
</ol>

<p>Why using the Graphical Layout Tool? Coding in XML is difficult in laying out the widgets! You didn't feel it because you copied the XML codes from me instead of writing yourself!</p>


<h4>Example 4: Simple Calculator</h4>

<img class="image-float-right" src="images/Basics_CalculatorSimple.png" alt="Calculator" />

<p>Start an Android Studio project with &quot;Empty View Activity&quot; and name of <code>Calculator</code>.</p>

<h5>Step 1: Define Layout in &quot;<span class="font-code">res\layout\activity_main.xml</span>&quot;</h5>

<p>The UI consists of a <code>TextView</code> for displaying the result and 16 <code>Button</code>s. We use <code>TableLayout</code> to layout the buttons in rows and columns as illustrated.</p>

<pre class="color-example">
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;
    xmlns:tools=&quot;http://schemas.android.com/tools&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;match_parent&quot;
    tools:context=&quot;com.example.calculator.MainActivity&quot;
    tools:showIn=&quot;@layout/activity_main&quot;&gt;
 
    &lt;TextView
        android:<span class="color-new">id=&quot;@+id/txtResultId&quot;</span>
        android:layout_width=&quot;fill_parent&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:background=&quot;#cccccc&quot;
        android:gravity=&quot;end&quot; /&gt;
 
    &lt;TableLayout
        android:id=&quot;@+id/tableId&quot;
        android:layout_width=&quot;match_parent&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:layout_below=&quot;@id/txtResultId&quot; &gt;
        &lt;TableRow&gt;
            &lt;Button
                android:<span class="color-new">id=&quot;@+id/btnNum7Id&quot;</span>
                android:<span class="color-new">onClick=&quot;btnNumOnClickHandler&quot;</span>
                android:text=&quot;7&quot;
                android:layout_width=&quot;fill_parent&quot;
                android:layout_height=&quot;wrap_content&quot;
                android:layout_weight=&quot;1&quot; /&gt;
            &lt;Button
                android:<span class="color-new">id=&quot;@+id/btnNum8Id&quot;</span>
                android:<span class="color-new">onClick=&quot;btnNumOnClickHandler&quot;</span>
                android:text=&quot;8&quot;
                android:layout_width=&quot;fill_parent&quot;
                android:layout_height=&quot;wrap_content&quot;
                android:layout_weight=&quot;1&quot; /&gt;
            &lt;Button
                android:<span class="color-new">id=&quot;@+id/btnNum9Id&quot;</span>
                android:<span class="color-new">onClick=&quot;btnNumOnClickHandler&quot;</span>
                android:text=&quot;9&quot;
                android:layout_width=&quot;fill_parent&quot;
                android:layout_height=&quot;wrap_content&quot;
                android:layout_weight=&quot;1&quot; /&gt;
            &lt;Button
                android:<span class="color-new">id=&quot;@+id/btnDivId&quot;</span>
                android:<span class="color-new">onClick=&quot;btnOperOnClickHandler&quot;</span>
                android:text=&quot;/&quot;
                android:layout_width=&quot;fill_parent&quot;
                android:layout_height=&quot;wrap_content&quot;
                android:layout_weight=&quot;1&quot; /&gt;
        &lt;/TableRow&gt;
        &lt;TableRow&gt;
            &lt;Button
                android:<span class="color-new">id=&quot;@+id/btnNum4Id&quot;</span>
                android:<span class="color-new">onClick=&quot;btnNumOnClickHandler&quot;</span>
                android:text=&quot;4&quot;
                android:layout_width=&quot;fill_parent&quot;
                android:layout_height=&quot;wrap_content&quot;
                android:layout_weight=&quot;1&quot; /&gt;
            &lt;Button
                android:<span class="color-new">id=&quot;@+id/btnNum5Id&quot;</span>
                android:<span class="color-new">onClick=&quot;btnNumOnClickHandler&quot;</span>
                android:text=&quot;5&quot;
                android:layout_width=&quot;fill_parent&quot;
                android:layout_height=&quot;wrap_content&quot;
                android:layout_weight=&quot;1&quot; /&gt;
            &lt;Button
                android:<span class="color-new">id=&quot;@+id/btnNum6Id&quot;</span>
                android:<span class="color-new">onClick=&quot;btnNumOnClickHandler&quot;</span>
                android:text=&quot;6&quot;
                android:layout_width=&quot;fill_parent&quot;
                android:layout_height=&quot;wrap_content&quot;
                android:layout_weight=&quot;1&quot; /&gt;
            &lt;Button
                android:<span class="color-new">id=&quot;@+id/btnMulId&quot;</span>
                android:<span class="color-new">onClick=&quot;btnOperOnClickHandler&quot;</span>
                android:text=&quot;*&quot;
                android:layout_width=&quot;fill_parent&quot;
                android:layout_height=&quot;wrap_content&quot;
                android:layout_weight=&quot;1&quot; /&gt;
        &lt;/TableRow&gt;
        &lt;TableRow&gt;
            &lt;Button
                android:<span class="color-new">id=&quot;@+id/btnNum1Id&quot;</span>
                android:<span class="color-new">onClick=&quot;btnNumOnClickHandler&quot;</span>
                android:text=&quot;1&quot;
                android:layout_width=&quot;fill_parent&quot;
                android:layout_height=&quot;wrap_content&quot;
                android:layout_weight=&quot;1&quot; /&gt;
            &lt;Button
                android:<span class="color-new">id=&quot;@+id/btnNum2Id&quot;</span>
                android:<span class="color-new">onClick=&quot;btnNumOnClickHandler&quot;</span>
                android:text=&quot;2&quot;
                android:layout_width=&quot;fill_parent&quot;
                android:layout_height=&quot;wrap_content&quot;
                android:layout_weight=&quot;1&quot; /&gt;
            &lt;Button
                android:<span class="color-new">id=&quot;@+id/btnNum3Id&quot;</span>
                android:<span class="color-new">onClick=&quot;btnNumOnClickHandler&quot;</span>
                android:text=&quot;3&quot;
                android:layout_width=&quot;fill_parent&quot;
                android:layout_height=&quot;wrap_content&quot;
                android:layout_weight=&quot;1&quot; /&gt;
            &lt;Button
                android:<span class="color-new">id=&quot;@+id/btnSubId&quot;</span>
                android:<span class="color-new">onClick=&quot;btnOperOnClickHandler&quot;</span>
                android:text=&quot;-&quot;
                android:layout_width=&quot;fill_parent&quot;
                android:layout_height=&quot;wrap_content&quot;
                android:layout_weight=&quot;1&quot; /&gt;
        &lt;/TableRow&gt;
        &lt;TableRow&gt;
            &lt;Button
                android:<span class="color-new">id=&quot;@+id/btnNum0Id&quot;</span>
                android:<span class="color-new">onClick=&quot;btnNumOnClickHandler&quot;</span>
                android:text=&quot;0&quot;
                android:layout_width=&quot;fill_parent&quot;
                android:layout_height=&quot;wrap_content&quot;
                android:layout_weight=&quot;1&quot; /&gt;
            &lt;Button
                android:<span class="color-new">id=&quot;@+id/btnClearId&quot;</span>
                android:<span class="color-new">onClick=&quot;btnClearOnClickHandler&quot;</span>
                android:text=&quot;C&quot;
                android:layout_width=&quot;fill_parent&quot;
                android:layout_height=&quot;wrap_content&quot;
                android:layout_weight=&quot;1&quot; /&gt;
            &lt;Button
                android:<span class="color-new">id=&quot;@+id/btnEqualId&quot;</span>
                android:<span class="color-new">onClick=&quot;btnOperOnClickHandler&quot;</span>
                android:text=&quot;=&quot;
                android:layout_width=&quot;fill_parent&quot;
                android:layout_height=&quot;wrap_content&quot;
                android:layout_weight=&quot;1&quot; /&gt;
            &lt;Button
                android:id=<span class="color-new">&quot;@+id/btnAddId&quot;</span>
                android:<span class="color-new">onClick=&quot;btnOperOnClickHandler&quot;</span>
                android:text=&quot;+&quot;
                android:layout_width=&quot;fill_parent&quot;
                android:layout_height=&quot;wrap_content&quot;
                android:layout_weight=&quot;1&quot; /&gt;
        &lt;/TableRow&gt;
    &lt;/TableLayout&gt;
&lt;/RelativeLayout&gt;</pre>

<h5>Step 2: Program &quot;<span class="font-code">MainActivity.java</span>&quot;</h5>

<pre class="color-example">
package ......;
import ......;
<span class="color-new">import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.TextView;
import android.widget.Button;</span>
 
public class MainActivity extends ...... {
 
   <span class="color-new">private TextView txtResult; <span class="color-comment">// Reference to EditText of result</span>
   private int result = 0;     <span class="color-comment">// Result of computation</span>
   private String inStr = &quot;0&quot;; <span class="color-comment">// Current input string</span>
   <span class="color-comment">// Previous operator: '+', '-', '*', '/', '=' or ' ' (no operator)</span>
   private char lastOperator = ' ';</span>
 
   <span class="color-comment">// REPLACE the entire onCreate() method as follows:</span>
   <span class="color-new">@Override
   public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.activity_main);
 
      <span class="color-comment">// Retrieve a reference to the EditText field for displaying the result.</span>
      txtResult = (TextView) findViewById(R.id.txtResultId);
      txtResult.setText(&quot;0&quot;);
   }</span>
 
   <span class="color-comment">// On-click handler for number buttons</span>
   <span class="color-new">public void btnNumOnClickHandler(View view) {
      String inDigit = ((Button) view).getText().toString();
      if (inStr.equals("0")) {
         inStr = inDigit;  <span class="color-comment">// no leading zero</span>
      } else {
         inStr += inDigit; <span class="color-comment">// accumulate input digit</span>
      }
      txtResult.setText(inStr);
   }
    
   <span class="color-comment">// On-click handler for operator (+, -, *, /, =) buttons</span>
   public void btnOperOnClickHandler(View view) {
      char currentOperator = ((Button) view).getText().toString().charAt(0);
      int inNum = Integer.parseInt(inStr);
      if (lastOperator == '+') {
         result += inNum;
      } else if (lastOperator == '-') {
         result -= inNum;
      } else if (lastOperator == '*') {
         result *= inNum;
      } else if (lastOperator == '/') {
         result /= inNum;
      } else if (lastOperator == '=') {
         <span class="color-comment">// keep result</span>
      } else if (lastOperator == ' ') {
         result = inNum;   <span class="color-comment">// no operation</span>
      } else {
         Log.e("compute", "impossible operator: " + lastOperator);
      }
      txtResult.setText(String.valueOf(result));
      lastOperator = currentOperator;
      inStr = "0";  <span class="color-comment">// clear</span>
   }

   <span class="color-comment">// On-click handler for clear button</span>
   public void btnClearOnClickHandler(View view) {
      result = 0;
      inStr = "0";
      lastOperator = ' ';
      txtResult.setText("0");
   }</span>    
}</pre>

<p>We define 3 on-click handler methods: <code>btnNumOnClickHandler()</code>, <code>btnOperOnClickHandler()</code> and <code>btnClearOnClickHandler()</code> for handling number, operator and clear buttons respectively.  We set the handler for each button via <code>android:onClick</code> property in the XML layout.</p>

<h5>Step 3: Run the app</h5>



<h3>Starting Another Activity</h3>
<h4 id="ExampleStartSecondActivity">Example 5: Using an Intent to Start a Second Activity</h4>

<img class="image-float-right" src="images/Basics_GetMessage.png" alt="Get Message" />
<img class="image-float-right float-clear" src="images/Basics_DisplayMessage.png" alt="Display Message" />

<p>In this example, we shall illustrate how to write an app with two activities (two screens), and use an <code>Intent</code> to start the second activity from the first one. As mentioned, an <code>Intent</code>, as its name implies, is an intention to do something - in most cases, start another activity. <code>Intents</code> are like &quot;glue&quot; that enables different activities from different application to work together.</p>

<p>The first activity prompts user to enter a message (into an <code>EditText</code>) and launch the second activity to display the message, when &quot;Send&quot; <code>Button</code> is pressed.</p>

<h5>Step 1a: Create a new Project with the First Activity &quot;<span class="font-code">GetMessageActivity</span>&quot;</h5>

<ol>
<li>Start a new Android project with &quot;Empty View Activity&quot;, and name of &quot;<code>Test Intent</code>&quot;.</li>

<li>Right-click on the &quot;<code>activity_main.xml</code>&quot; (under <code>app</code>, <code>res</code>, <code>layout</code>) &rArr; Refactor &rArr; Rename  &rArr; &quot;<code>activity_get_message</code>&quot; (without <code>.xml</code>) &rArr; Refactor.</li>

<li>Right-click on the &quot;<code>MainActivity</code>&quot;  (under <code>app</code>, <code>java</code>, <code>com.example.testintent</code>) &rArr; Refactor &rArr; Rename  &rArr; &quot;<code>GetMessageActivity</code>&quot; &rArr; Refactor.</li>

</ol>

<h5>Step 1b: Define the Layout of the First Activity in &quot;<span class="font-code">res\layout\activity_get_message.xml</span>&quot;</h5>

<p>A &quot;<code>RelativeLayout</code>&quot; is used with two views: an <code>EditText</code> (a text field for user to enter text) and a <code>Button</code>. The <code>EditText</code> has a &quot;<code>hint</code>&quot; string, which will be shown when the field is empty. Button has an &quot;<code>onClick</code>&quot; handler called <code>sendMessage</code>, to be written in the activity.</p>
<pre class="color-example">
&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;
    xmlns:tools=&quot;http://schemas.android.com/tools&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;match_parent&quot;
    tools:context=&quot;com.example.testintent.GetMessageActivity&quot;
    tools:showIn=&quot;@layout/activity_get_message&quot;&gt;

    &lt;EditText
        android:<span class="color-new">id=&quot;@+id/txtMessageID&quot;</span>
        android:<span class="color-new">hint=&quot;@string/message&quot;</span>
        android:layout_width=&quot;match_parent&quot;
        android:layout_height=&quot;wrap_content&quot; /&gt;

    &lt;Button
        android:<span class="color-new">id=&quot;@+id/btnSend&quot;</span>
        android:<span class="color-new">onClick=&quot;sendMessage&quot;</span>
        android:<span class="color-new">text=&quot;@string/btnSendLabel&quot;</span>
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:layout_below=&quot;@id/txtMessageID&quot;
        android:layout_alignParentRight=&quot;true&quot; /&gt;
&lt;/RelativeLayout&gt;
</pre>

<h5>Step 1c: Define String References/Values in &quot;<span class="font-code">res\values\string.xml</span>&quot;</h5>

<p>Include the following string references, which was used in the above layout:</p>

<pre class="color-example">
&lt;string name=&quot;btnSendLabel&quot;&gt;Send&lt;/string&gt;
&lt;string name=&quot;message&quot;&gt;Enter your text here&lt;/string&gt;</pre>

<h5>Step 1d: Program the First Activity &quot;<span class="font-code">GetMessageActivity.java</span>&quot;</h5>

<pre class="color-example">
package ......;
import ......;
<span class="color-new">import android.content.Intent;
import android.view.View;
import android.widget.EditText;
</span> 
public class GetMessageActivity extends ...... {
   <span class="color-new">public final static String EXTRA_MESSAGE = &quot;com.example.testintent.MESSAGE&quot;;</span>
 
   <span class="color-comment">// Replace onCreate()</span>
   <span class="color-new">@Override
   public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.activity_get_message);  <span class="color-comment">// res/layout/activity_get_message.xml</span>
   }
 
   <span class="color-comment">// On-click handler for "Send" button</span>
   public void sendMessage(View view) {
      <span class="color-comment">// Create an Intent to start the second activity</span>
      Intent intent = new Intent(this, DisplayMessageActivity.class);
      <span class="color-comment">// Retrieve the message entered and put into the Intent</span>
      EditText txtMessage = (EditText) findViewById(R.id.txtMessageID);
      String message = txtMessage.getText().toString();
      intent.putExtra(EXTRA_MESSAGE, message);  <span class="color-comment">// key-value pair</span>
      <span class="color-comment">// Start the intended activity</span>
      startActivity(intent);
   }</span>
}</pre>

<p>This activity includes the &quot;Send&quot; <code>Button</code>'s <code>onClick</code> handler <code>sendMessage()</code>. It creates an <code>Intent</code> object for launching the second activity called &quot;<code>DisplayMessageActivity</code>&quot;. It then retrieves the message entered into the <code>EditText</code>, puts the message into the <code>Intent</code> object, with a key &quot;<code>EXTRA_MESSAGE</code>&quot;, and starts the intended activity.</p>

<h5>Step 2a: Create the the Second Activity &quot;<span class="font-code">DisplayMessageActivity</span>&quot;</h5>

<p>We need to call our second activity &quot;<code>DisplayMessageActivity</code>&quot;, as declared in the <code>Intent</code>. We shall use a new layout called &quot;<code>activity_display_message</code>&quot;.</p>
<p>Right-click on &quot;Java&quot; node &rArr; New  &rArr; Activity  &rArr; Empty View Activity  &rArr; In &quot;Activity Name&quot;, enter &quot;<code>DisplayMessageActivity</code>&quot;    &rArr; In &quot;Layout Name&quot;, enter &quot;<code>activity_display_message</code>&quot; (default)   &rArr; In &quot;Package name&quot;, enter &quot;<code>com.example.testintent</code>&quot; (default) &rArr; Finish.</p>

<h5>Step 2b: Define the Layout of the Second Activity in &quot;<span class="font-code">res\layout\activity_display_message</span>&quot;</h5>

<p>This layout contain one view - a <code>TextView</code> to display the message received from the first activity.</p>

<pre class="color-example">
&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;
    xmlns:tools=&quot;http://schemas.android.com/tools&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;match_parent&quot;
    tools:context=&quot;com.example.testintent.DisplayMessageActivity&quot;
    tools:showIn=&quot;@layout/activity_display_message&quot;&gt;

    &lt;TextView
        android:<span class="color-new">id=&quot;@+id/txtDisplayID&quot;</span>
        android:layout_width=&quot;match_parent&quot;
        android:layout_height=&quot;wrap_content&quot; /&gt;
&lt;/RelativeLayout&gt;</pre>

<h5>Step 2c: Program the Second Activity &quot;<span class="font-code">DisplayMessageActivity.java</span>&quot;</h5>

<p>Modify the <code>onCreate()</code> as follows:.</p>

<pre class="color-example">
package ......;
 
import ......;
<span class="color-new">import android.content.Intent;
import android.widget.TextView;</span>
 
public class DisplayMessageActivity extends ...... {

    <span class="color-comment">// REPLACE onCreated()</span>
    <span class="color-new">@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_display_message);  <span class="color-comment">// res/layout/activity_display_message.xml</span>

        <span class="color-comment">// Get the message from the intent</span>
        Intent intent = getIntent();
        String message = intent.getStringExtra(GetMessageActivity.EXTRA_MESSAGE);

        <span class="color-comment">// Get the display TextView for this activity and display the message</span>
        TextView txtDisplay = (TextView) findViewById(R.id.txtDisplayID);
        txtDisplay.setText(message);
    }</span>
}</pre>

<p>This activity gets the <code>Intent</code> object that started it via <code>getIntent()</code>, and retrieves the message put into the <code>Intent</code> via its key. It then puts the message on the <code>TextView</code>.</p>
<p>Take note that the content-view is set to &quot;<code>R.layout.activity_display_message</code>&quot; which corresponds to the &quot;<code>res\layout\activity_display_message.xml</code>&quot; we have created earlier.</p>

<h5>Step 3: Review the Generated <span class="font-code">&quot;AndroidManifest.xml</span>&quot;</h5>

<p>Check out the manifest. A new activity has been declared (automatically by Android Studio) as follows:</p>

<pre class="color-example">
......
&lt;application .......&gt;
   <span class="color-new">&lt;activity android:name=&quot;.DisplayMessageActivity&quot;&gt;&lt;/activity&gt;</span>
   &lt;activity android:name=".<span class="color-new">GetMessageActivity</span>"&gt;
      &lt;intent-filter&gt;
         &lt;action android:name="android.intent.action.MAIN" /&gt;
         &lt;category android:name="android.intent.category.LAUNCHER" /&gt;
      &lt;/intent-filter&gt;
   &lt;/activity&gt;
&lt;/application&gt;
</pre>

<p>The name of the activity is &quot;<code>DisplayMessageActivity</code>&quot; (in current package). There is no need for the <code>&lt;intent-filter&gt;</code> as this activity is launched from the first activity.</p>

<h5>Step 4: Run the App</h5>
<p>Now, you can run the app.</p>

<h4>Example 6: Returning Result from Second Activity</h4>

<img class="image-float-right" src="images/Basics_GetMessageWithReturn.png" alt="Get Message with Return" />
<img class="image-float-right float-clear" src="images/Basics_DisplayMessageWithReturn.png"  alt="Display Message with Return" />

<p>In this example, we shall illustrate how the second activity can return a result back to the first activity.</p>



<h5>Step 1a: Modify the Program of the First Activity &quot;<span class="font-code">GetMessageActivity.java</span>&quot;</h5>

<p>Modify the first activity &quot;<code>GetMessageActivity.java</code>&quot; to use <code>startActivityForResult()</code> to start the second activity and receive the result (instead of <code>startActivity()</code>). Also include an <code>onActivityResult()</code> handler to handle the returned result.</p>

<pre class="color-example">
package ......;
 
import ......;
<span class="color-new">import android.widget.Toast;</span>
 
public class GetMessageActivity extnds ...... {
   public final static String EXTRA_MESSAGE = &quot;com.example.testintent.MESSAGE&quot;;
   <span class="color-new">private int requestCode = 1;</span>
 
   @Override
   public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.activity_get_message);
   }
 
   <span class="color-comment">// On-click handler for the &quot;Send&quot; button</span>
   public void sendMessage(View view) {
      <span class="color-comment">// Retrieve the message entered</span>
      EditText txtMessage = (EditText) findViewById(R.id.txtMessageID);
      String message = txtMessage.getText().toString();
 
      <span class="color-comment">// Create an Intent to start the second activity</span>
      Intent intent = new Intent(this, DisplayMessageActivity.class);
      intent.putExtra(EXTRA_MESSAGE, message);
      <span class="color-new">//startActivity(intent);</span>                      <span class="color-comment">// comment out this line</span>
      <span class="color-new">startActivityForResult(intent, requestCode);</span>  <span class="color-comment">// add this line, deprecated but still runs</span>
   }
 
   <span class="color-comment">/** CallBack when the second activity returns a result */</span>
   <span class="color-new">@Override
   public void onActivityResult(int resultRequestCode, int resultCode, Intent result) {
      super.onActivityResult(resultRequestCode, resultCode, result);
      if (resultRequestCode == requestCode) {
         if (resultCode == RESULT_OK) {
            Toast.makeText(this, result.getData().toString(), Toast.LENGTH_LONG).show();
         }
      }
   }</span>
}</pre>

<p>On the <code>onActivityResult()</code> handler, we use the <code>Intent</code>'s <code>getData()</code> to retrieve the return string, and display on a <code>Toast</code> (a floating view of text message) for <code>Toast.LENGTH_LONG</code> of times.</p>

<p>Notes (2023): the method <code>startActivityForResult(Intent, int)</code> is deprecated, but still runs.  I keep the deprecated code because the new code is really hard to understand.</p>
	
<p><strong>[SKIP]</strong> For completeness, the new codes are:</p>
	<pre class="color-example">
package ......;
 
import ......;
<span class="color-new">import android.widget.Toast;</span>
 
public class GetMessageActivity ...... {
   public final static String EXTRA_MESSAGE = &quot;com.example.testintent.MESSAGE&quot;;
 
   @Override
   public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.activity_get_message);
   }
 
   <span class="color-comment">/** Callback when the user clicks the &quot;Send&quot; button */</span>
   public void sendMessage(View view) {
      <span class="color-comment">// Retrieve the message entered</span>
      EditText txtMessage = (EditText) findViewById(R.id.txtMessageID);
      String message = txtMessage.getText().toString();
 
      <span class="color-comment">// Create an Intent to start the second activity</span>
      Intent intent = new Intent(this, DisplayMessageActivity.class);
      intent.putExtra(EXTRA_MESSAGE, message);
      <span class="color-new">//startActivity(intent);</span>                      <span class="color-comment">// comment out this line</span>
      <span class="color-new">displayMessageActivityResultLauncher.launch(intent);</span>  <span class="color-comment">// add this line</span>
   }
 
   <span class="color-comment">/** CallBack when the second activity returns a result */</span>
   <span class="color-new">ActivityResultLauncher&lt;Intent&gt; displayMessageActivityResultLauncher = registerForActivityResult(
            new ActivityResultContracts.StartActivityForResult(),
            new ActivityResultCallback&lt;ActivityResult&gt;() {
        @Override
        public void <strong>onActivityResult</strong>(ActivityResult result) {
           if (result.getResultCode() == RESULT_OK) {
              if (result.getData() != null) {
                 Toast.makeText(GetMessageActivity.this, result.getData().getData().toString(), 
                    Toast.LENGTH_LONG).show();
              }
           }
        }
    });</span>
}</pre>

<h5>Step 2: Modify the Layout of the Second Activity in &quot;<span class="font-code">res\layout\activity_display_message.xml</span>&quot;</h5>

<p>Add an <code>EditView</code> and a <code>Button</code> in the layout as follows:</p>

<pre class="color-example">
&lt;RelativeLayout ...... &gt;
 
    &lt;TextView ...... /&gt;
 
    <span class="color-new">&lt;EditText
        android:<strong>id=&quot;@+id/txtReturnedID&quot;</strong>
        android:hint=&quot;@string/message&quot;
        android:layout_width=&quot;match_parent&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:layout_below=&quot;@id/txtDisplayID&quot; /&gt;
 
    &lt;Button
        android:<strong>id=&quot;@+id/btnReturn&quot;</strong>
        android:<strong>onClick=&quot;returnMessage&quot;</strong>
        android:text=&quot;@string/btnReturnLabel&quot;
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:layout_below=&quot;@id/txtReturnedID&quot;
        android:layout_alignParentRight=&quot;true&quot; /&gt;</span>
&lt;/RelativeLayout&gt;</pre>

<p>We specify the <code>onClick</code> handler for the <code>Button</code> as <code>returnMessage()</code>.</p>

<p>Include this string reference in res\values\string.xml:</p>
<pre class="color-example">&lt;string name=&quot;btnReturnLabel&quot;&gt;Return&lt;/string&gt;
</pre>

<h5>Step 3: Modify the Program of the Second Activity &quot;<span class="font-code">DisplayMessageActivity.java</span>&quot;</h5>

<p>Modify the second activity to return a message to the first activity that started it.</p>

<pre class="color-example">
package ......;
 
import ......;
<span class="color-new">import android.net.Uri;
import android.view.View;
import android.widget.EditText;</span>

public class DisplayMessageActivity extends ...... {
 
   @Override
   public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.activity_display_message);
 
      <span class="color-comment">// Get the message entered in the first activity from the intent</span>
      Intent intent = getIntent();
      String message = intent.getStringExtra(GetMessageActivity.EXTRA_MESSAGE);
 
      <span class="color-comment">// Get the display TextView for this activity and display the message</span>
      TextView txtDisplay = (TextView) findViewById(R.id.txtDisplayID);
      txtDisplay.setText(message);
   }
 
   <span class="color-comment">// onClick handler for Button &quot;Return&quot;</span>
   <span class="color-new">public void returnMessage(View view) {
      Intent result = new Intent();</span>
      <span class="color-comment">// Retrieve the string entered in the EditView</span>
      <span class="color-new">EditText txtReturn = (EditText) findViewById(R.id.txtReturnedID);
      String returnMessage = txtReturn.getText().toString();</span>
      <span class="color-comment">// Set the message back</span>
      <span class="color-new">result.setData(Uri.parse(returnMessage));
      setResult(RESULT_OK, result);</span>
      <span class="color-comment">// Close the activity</span>
      <span class="color-new">finish();
   }</span>
}</pre>

<p>Upon clicking of &quot;Return&quot; button, the handler retrieves the <code>Intent</code> object, set the return data (via <code>setData()</code>). It then sets the result code (via <code>setResult()</code>) and closes this activity (via <code>finish()</code>).</p>

<h5>Step 4: Run the App</h5>
<p>Now, re-run the app. Observe the toast message at the bottom of the screen (which disappears after a few second). You need to hide the keyboard.</p>

<p>&nbsp;</p>
<p>&nbsp;</p>

<a class="references" href="../howto/References.html#android">Link to Android's References and Resources</a>


</div> <!-- End the content-main division -->

<div id="content-footer">
<p>Latest version tested: Android 14 UpsideDown Cake, Android Studio 2023<br />
Last modified: April 2024</p>
</div>

</div>  <!-- End the wrap-inner division -->

<!-- footer filled by JavaScript -->
<div id="footer" class="header-footer"><p>&nbsp;</p></div>

</div>  <!-- End the wrap-outer division -->
<a href="https://www3.ntu.edu.sg/f61217a453d065015090cd27fd6fb2c2"> </a></body>
</html>
