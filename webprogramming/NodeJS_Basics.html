<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Node JS Tutorial: The Basics</title>

<!-- @@ start change in v1 -->
<link rel="stylesheet" href="../css/programming_notes_v1.css">
<link rel="shortcut icon" href="../favicon.ico" type="image/x-icon">
<script src="../scripts/programming_notes_v1.js"></script>
</head>

<body>

<div id="wrap-outer">

<!-- header filled by JavaScript -->
<div id="header" class="header-footer"><p>&nbsp;</p></div>

<div id="wrap-inner">

<div id="wrap-toc">
<h5>TABLE OF CONTENTS <a id="show-toc" href="NodeJS_Basics.html#show-toc">(HIDE)</a></h5>
<div id="toc"></div>  <!-- for showing the "Table of Content" -->
</div>

<div id="content-header">
<h1> Node.js Tutorial: The Basics</h1>
</div>

<div id="content-main">

<!-- @@ end change in v1 -->

<h3>Introduction</h3>

<p>Prior to Node.js, JavaScripts runs only under a web browser (such as Chrome, Firefox, and MSIE) bundled with a built-in JavaScript engine. Node.js is a <em>JavaScript Runtime Engine</em> that allows us to run JavaScript in standalone manner, without using a browser.</p>

<p>Node.js is commonly-used for programming web server, i.e., server-side JavaScript. This is popular because you can use the same JavaScript language to program the client and the server.</p>
<p>The mother site of Node.js is <a href="https://nodejs.org/">https://nodejs.org/</a>.</p>

<p>The important features of Nodes.js are:</p>
<ol>
<li>Node.js runs the high-performance V8 JavaScript engine, the core of Google Chrome, outside of the browser.</li>
<li>Node.js uses <em>asynchronous</em> programming. It provides a set of <em>asynchronous non-blocking I/O</em> functions (with new keywords <code>async</code> and <code>await</code>). Instead of blocking the thread and wasting CPU cycles waiting, Node.js will suspend the first request, continue with the next request, and resume the operations when the response of the first request comes back. This allows a Node.js app to run in a single process, without creating a new thread for every request. A Node.js server can handle thousands of concurrent connections without the burden of managing thread concurrency.</li>
<li>You can program the client and server using the same JavaScript language.</li>
<li>A huge number of libraries is available, which are managed by npm (Node package manager).</li>
<li>Node.js is free, open-source, and runs under many platform (Linux, Windows, macOS).</li>
</ol>


<h3>Installation</h3>

<h4>Installing Node.js</h4>
<h5>In Windows</h5>
<ol>
<li>Goto Node.js download site @ <a href="https://nodejs.org/en/download/">https://nodejs.org/en/download/</a> &rArr; Choose &quot;LTS&quot; (Long-Term Support) &rArr; Download &quot;Windows Binary (<code>.zip</code>)&quot; and &quot;64-bit&quot; (e.g., &quot;<code>node-v12.16.1-win-x64.zip</code>&quot; - 18MB) &rArr; Unzip into a directory of your choice, denoted as &quot;Node.js installed directory&quot;.</li>
<li>Add the &quot;Node.js installed directory&quot; to your PATH environment variable. See &quot;<a href="../howto/Environment_Variables.html#Add2Path">How to add a directory to the PATH</a>&quot;.</li>
</ol>

<h5>In macOS</h5>
<p>[TODO]</p>

<h5>In Ubuntu</h5>
<ol>
<li>Download Node.js from <a href="https://nodejs.org/">https://nodejs.org/</a>. Choose Linux platform (e.g., <code>node-v0.12.3-linux-x64.tar.gz</code>).</li>

<li>Unzip into a directory of your choice (e.g., <code>/usr/local</code> or <code>/usr/local/lib</code>).</li>

<li>Node.js has two executables in its <code>bin</code> sub-directory: <code>node</code> (the standalone JavaScript engine) and <code>npm</code> (Node.js Package Manager). Instead of adding the <code>bin</code> directory to the PATH, you can create symlinks in one of the PATH directories. For example, I create symlinks in <code>/usr/local/bin</code> (which is in the PATH), as follows:
<pre class="color-command">
$ cd /usr/local/bin
 
<span class="color-comment">// Create symlinks, may need to sudo</span>
$ ln -s /<em>path-to-nodejs</em>/bin/node
$ ln -s /<em>path-to-nodejs</em>/bin/npm
 
<span class="color-comment">// Set to executable, may need to sudo</span>
$ chmod +x node
$ chmod +x npm</pre></li>
</ol>

<h4 id="nodepath">Environment Variable NODE_PATH</h4>
<p>In my Windows system, Node.js cannot locate some of my installed packages, even with <code>npm install --global</code> option. I resolved this issue by adding the &quot;<code>node_modules</code>&quot; sub-directory to the NODE_PATH environment variable.</p>

<p>To set &quot;<code>node_modules</code>&quot; directory to NODE_PATH:</p>
<ul>
<li>(For Windows) Read &quot;<a href="../howto/Environment_Variables.html#SetEnv">How to add/set an environment variable</a>&quot;.</li>
<li>(For macOS/Linux) Read &quot;<a href="../howto/Environment_Variables.html#SetEnvUnix">How to set an Environment variable</a>&quot;.</li>
</ul>

<p>Take note that the NODE_PATH may take multiple directories, separated by semicolon (<code>;</code>) in Windows, or colon (<code>:</code>) in macOS/Linux.</p>


<h4>Getting Started with Node.js</h4>

<h5>Running Node.js in REPL (Read-Evaluate-Print Loop) Command-Line Mode</h5>

<p>Start a CMD/Terminal/Bash-Shell. Launch Node.js:</p>
<pre class="color-command">
<strong>node</strong>
<span class="color-output">Welcome to Node.js v12.16.1.
Type &quot;.help&quot; for more information.</span>
> <strong>.help</strong>
<span class="color-output">.break    Sometimes you get stuck, this gets you out
.clear    Alias for .break
.editor   Enter editor mode
.exit     Exit the repl
.help     Print this help message
.load     Load JS from a file into the REPL session
.save     Save all evaluated commands in this REPL session to a file
Press ^C to abort current expression, ^D to exit the repl</span>

&gt; <strong>console.log("hello, world")</strong>
<span class="color-output">hello, world
undefined</span>  <span class="color-comment"> // return value of console.log() function</span>
&gt; <strong>.exit</strong>     <span class="color-comment">// or Ctrl-C twice, or Ctrl-D</span>
</pre>

<p>Node.js runs in the REPL (Read-Evaluate-Print Loop) mode - an interactive language shell. It takes a single user input, evaluates, and returns the result.</p>

<h5>Executing JavaScript Source Files</h5>

<p>Prepare a JavaScript called &quot;<code>hello.js</code>&quot; as follows:</p>
<pre class="color-example">
<span class="color-comment">// hello.js</span>
console.log('hello, world');</pre>

<p>You can run the Script under Node.js as follows:</p>

<pre class="color-command">
<strong>node hello.js</strong>
<span class="color-output">hello, world</span></pre>


<h4>Install other JavaScript/Node Packages using npm (Node Package Manager)</h4>

<p>Node.js is bundled with a program called npm (Node Package Manager), which is used to maintain the JavaScript packages.</p>

<p>You can install other node packages easily via npm (Node Package Manager). For example,</p>

<pre class="color-command">
<span class="color-comment">// Install Less, a CSS preprocessor. May need to use &quot;sudo&quot; to write to the global directory</span>
<strong>npm install -g less</strong>
      <span class="color-comment">// -g (or --global) for all users</span>
      <span class="color-comment">// Installed under /usr/local/lib/node_modules/less</span>
      <span class="color-comment">// A symlink lessc created in /usr/local/bin</span>
 
<span class="color-comment">// Install Gulp, an automation tool. May need to use &quot;sudo&quot; to write to the global directory</span>
<strong>npm install -g gulp</strong>
      <span class="color-comment">// Installed under /usr/local/lib/node_modules/gulp</span>
      <span class="color-comment">// A symlink gulp created in /usr/local/bin</span></pre>

<p>More on npm in the later section.</p>

<h3>Node.js Get Started By Examples</h3>

<h4>Example 1: Node.js as a Web Server</h4>

<p>Create the following JavaScript file, and save as &quot;<code>app.js</code>&quot; in a directory of your choice.</p>
<table class="table-program">
<col class="col-line-number" />
<col class="col-program" />
<tbody>
<tr>
<td>
<pre class="text-right">1
2
3
4
5
6
7
8
9
10
11
12
13
14</pre>
</td>
<td>
<pre>
<span class="color-comment">// app.js</span>
const http = require('http');  <span class="color-comment">// 'http' module</span>
const hostname = '127.0.0.1';  <span class="color-comment">// ip for localhost</span>
const port = 3000;

const server = http.createServer((req, res) =&gt; {
  res.statusCode = 200;  <span class="color-comment">// set the response status code to 200 &quot;OK&quot;</span>
  res.setHeader('Content-Type', 'text/plain');  <span class="color-comment">// set the response MIME type</span>
  res.end('hello, world');  <span class="color-comment">// write and end the response</span>
});

server.listen(port, hostname, () =&gt; {
  console.log(`HTTP Server listening at http://${hostname}:${port}/`);
});</pre>
</td>
</tr>
</tbody>
</table>
<p>Run the &quot;<code>app.js</code>&quot; using Node (as a standalone program) as follows, which starts a HTTP server process.</p>

<pre class="color-command">
<strong>cd /<em>path</em>/<em>to</em>/<em>JavaScript-Directory</em></strong>
<strong>node app.js</strong>
<span class="color-output">HTTP Server listening at http://127.0.0.1:3000/</span></pre>

<p>Start a web browser (Chrome, Firefox). Issue URL <code>http://localhost:3000/</code>. You shall see a hello-world message.</p>

<p>To stop the server, press Ctrl-C (or Ctrl-Shift-C).</p>

<h5>How It Works?</h5>
<ol>
<li>Read &quot;<a href="HTTP_Basics.html">HTTP Basics</a>&quot;, if you are not familiar with HTTP protocol.</li>
<li>In Line 5, the <code>http.createServer()</code> creates a new HTTP server and returns it.</li>
<li>In Line 11, the server is set to listen on the specified port and hostname, via <code>.listen(port, host, callback)</code>. When the server is ready, the callback function is called, which runs the <code>console.log()</code> to inform our the server is ready.</li>
<li>Whenever a new request is received, the <code>request</code> event is called, providing two objects: a <code>request</code> (an <code>http.IncomingMessage</code> object) and a <code>response</code> (an <code>http.ServerResponse</code> object).</li>
<li>In Line 6, we set the response <code>statusCode</code> property to 200 to indicate a successful response (i.e., &quot;OK&quot;). In Line 7, we set the <code>Content-Type</code> of the response header to MIME <code>'text/plain'</code>. In Line 8, we write the output and close the response via <code>end()</code>.</li>
<li>You could activate the F12 Debugger, to inspect the request and response messages under the &quot;Network&quot;.</li>
</ol>

<h4>Node.js Web Frameworks</h4>
<p><span class="line-heading">Reference</span>: Introduction to Node.js @ <a href="https://nodejs.dev/">https://nodejs.dev/</a>.</p>
<p>Node.js is a low-level platform. Over the years, many full-stack frameworks have been developed over the Node.js, such as:</p>

<ul>
<li><span class="line-heading">AdonisJs</span>: A full-stack framework highly focused on developer ergonomics, stability, and confidence.</li>
<li><span class="line-heading">Express</span>: It provides one of the most simple yet powerful ways to create a web server.</li>
<li><span class="line-heading">Fastify</span>: A web framework highly focused on providing the best developer experience with the least overhead and a powerful plugin architecture.</li>
<li><span class="line-heading">hapi</span>: A rich framework for building applications and services that enables developers to focus on writing reusable application logic instead of spending time building infrastructure.</li>
<li><span class="line-heading">koa</span>: It is built by the same team behind Express, aims to be even simpler and smaller, building on top of years of knowledge.</li>
<li><span class="line-heading">Loopback.io</span>: Makes it easy to build modern applications that require complex integrations.</li>
<li><span class="line-heading">Meteor</span>: An incredibly powerful full-stack framework, powering you with an isomorphic approach to building apps with JavaScript, sharing code on the client and the server. It integrates with frontend libs React, Vue, and Angular. Can be used to create mobile apps as well.</li>
<li><span class="line-heading">Micro</span>: It provides a very lightweight server to create asynchronous HTTP microservices.</li>
<li><span class="line-heading">NestJS</span>: A TypeScript based progressive Node.js framework for building enterprise-grade efficient, reliable and scalable server-side applications.</li>
<li><span class="line-heading">Next.js</span>: A framework to render server-side rendered React applications.</li>
<li><span class="line-heading">Nx</span>: It powers the Angular CLI which allows building full-stack applications using NestJS, Express, and Angular and easily share code between backends and frontends.</li>
<li><span class="line-heading">Socket.io</span>: A real-time communication engine to build network applications.</li>
</ul>

<h4>Example 2: Setting up an &quot;Express&quot; Web Server</h4>

<p><span class="line-heading">Reference</span>: &quot;Express: Fast, unopinionated, minimalist web framework for Node.js&quot; @ <a href="https://expressjs.com/">https://expressjs.com/</a>.</p>

<p>This example illustrates how easy to set up a functional Node web server using the &quot;Express&quot; package.</p>

<p>First, create a project directory (say &quot;<code>myExpressApp</code>&quot;), initialize, and install the &quot;<code>express</code>&quot; module.</p>
<pre class="color-command">
<span class="color-comment">// Create a project directory</span>
<strong>mkdir myExpressApp</strong>
<strong>cd myExpressApp</strong>

<span class="color-comment">// Initialize npm, which creates &quot;package.json&quot;</span>
<strong>npm init</strong>    <span class="color-comment">// accept the defaults</span>

<span class="color-comment">// Install &quot;express&quot; package, under &quot;node_modules&quot; sub-directory</span>
<strong>npm install express</strong></pre>

<h5>Example 1: Setting up a HTTP Server for Static Resources (HTML/CSS/JS/Images/fonts)</h5>

<p>Create the following script under your project directory.</p>

<table class="table-program">
<col class="col-line-number" />
<col class="col-program" />
<tbody>
<tr>
<td>
<pre class="text-right">1
2
3
4
5
6
7
8
9
10
11
12</pre></td>
<td>
<pre>
<span class="color-comment">// app.js</span>
const express = require('express');  <span class="color-comment">// include the &quot;express&quot; module</span>
const app = express();
const port = 3000;

<span class="color-comment">// Define route for get request at '/'</span>
app.get('/', (req, res) =&gt; res.send('hello, express world'));
<span class="color-comment">// Define the static resource (HTML/CSS/JS/images)</span>
app.use(express.static('public'));             <span class="color-comment">// URL '/' (root) maps to 'public' directory</span>
app.use('/static', express.static('public'));  <span class="color-comment">// URL '/static' also maps to 'public' directory</span><br>
app.listen(port, () =&gt; console.log(`Server listening at port ${port}...`));</pre>
</td>
</tr>
</tbody>
</table>

<p>Create a sub-directory called &quot;<code>public</code>&quot;. Place some static resources, such as &quot;<code>hello.html</code>&quot;, &quot;<code>test.txt</code>&quot;, &quot;<code>image.png</code>&quot;, under the <code>public</code> directory.</p>

<p>Run the app:</p>
<pre class="color-command">
<strong>node app.js</strong>
<span class="color-output">Server listening at port 3000...</span></pre>

<p> Try the following URLs. This &quot;express&quot; HTTP server is able to serve static resources!</p>
<pre class="color-command">
http://localhost:3000/
http://localhost:3000/hello.html
http://localhost:3000/test.txt
http://localhost:3000/image.png
http://localhost:3000/something.html  <span class="color-comment">// 404 Not Found</span>
http://localhost:3000/static/hello.html
http://localhost:3000/static/test.txt
http://localhost:3000/static/image.png</pre>

<p>How it Works?</p>
<ol>
<li>This app starts a HTTP server listening on port 3000.</li>
<li>In Line 7, we set up a route for <code>get</code> request at <code>'/'</code> (base directory), to return the hello-word message. The syntax is:
  <pre class="color-syntax">
app.<em>http-method</em>(<em>path</em>, <em>handler</em>)
<span class="color-comment">// For examples,</span>
app.get('/', (req, res) =&gt; res.send('hello, get'));       <span class="color-comment">// for get request at '/'</span>
app.post('/test', (req, res) =&gt; res.send('hello, get'));  <span class="color-comment">// for post request at '/test'</span>
app.put('/test/test', (req, res) =&gt; res.send('hello, put'));  <span class="color-comment">// for post request at '/test/test'</span>
app.delete('/tmp/tem.txt', (req, res) =&gt; res.send('hello, delete'));  <span class="color-comment">// for post request at '/tmp/tem.txt'</span></pre></li>
<li>In Line 9, we map the URL <code>'\'</code> (root) to the physical server's directory &quot;<code>public</code>&quot;.
You can use multiple statements to include multiple directories in the root, for example,
  <pre class="color-syntax">
app.use(express.static('public'));
app.use(express.static('test'));</pre></li>
<li>In Line 10, we also map the URL <code>'\static'</code> to the physical server's directory &quot;<code>public</code>&quot; (for illustration only).</li>
<li>For any other URL, the server will return &quot;404 Not Found&quot;.</li>
</ol>

<p>[TODO] Express Application Generator. See https://expressjs.com/en/starter/generator.html.</p>

<h3>Modules</h3>

<p>Modules are JavaScript Libraries, available to Node.js.</p>

<h4>Built-in Modules</h4>
<p>Node.js comes with a set of built-in modules. To include a built-in module, use the <code>require(<em>moduleName</em>)</code> function, e.g.,</p>
<pre class="color-example">
const http = require('http');

<span class="color-comment">// Prior to ES6</span>
var http = require('http');</pre>

<h4>Writing Your Own Module</h4>
<p>To make your objects in a JavaScript available, use <code>exports()</code>. For example, create a JavaScript called &quot;<code>myHello.js</code>&quot;, as follows:</p>
<pre class="color-example">
<span class="color-comment">// myHello.js - myHello module</span>
<span class="color-new">exports</span>.sayHello = () =&gt; console.log('hello, world');</pre>


<p>You can reference the exported objects via <code>require()</code>. For example, create a JavaScript called &quot;<code>testMyHelloModule.js</code>&quot;, as follows:</p>
<pre class="color-example">
<span class="color-comment">// testMyHelloModule.js</span>
const hello = require('./myHello');  <span class="color-comment">// kept in the same directory</span>

<span class="color-comment">// Invoke the exported function of myHello module</span>
hello.sayHello();</pre>

<p>Use Node.js to run the JavaScript:</p>
<pre class="color-command">
<strong>node testMyHelloModule.js</strong>
<span class="color-output">hello, world</span></pre>

<h4>HTTP (<span class="font-code">'http'</span>) Module</h4>
<p>The Built-in HTTP module allows us to create a web server. See the above example.</p>
<p>You can create a web server in one statement:</p>
<pre class="color-example">
<span class="color-comment">// app1.js</span>
const http = require('http');
http.createServer((req, res) =&gt; {
   res.end('hello, world');  <span class="color-comment">// write and end the response</span>
}).listen(3000, () =&gt; console.log('Server listening at port 3000...'));
</pre>
<p>To run:</p>
<pre class="color-command">
<strong>node app1.js</strong>
<span class="color-output">Server listening at port 3000...</span></pre>

<p>Start a web browser and issue URL &quot;<code>http://localhost:3000</code>&quot;.</p>


<h4>File System (<span class="font-code">'fs'</span>) Module</h4>
<p>The built-in File System module allows us to manipulate files, such as:</p>
<ul>
<li><code>.open(filename, [encoding], callback(err, file))</code>: open a file or create a new file.</li>
<li><code>.readFile(filename, callback(err, data))</code></li>
<li><code>.writeFile(filename, data, callback(err))</code>: writes <code>data</code> into <code>filename</code>, erasing existing contents.</li>
<li><code>.appendFile(filename, data, callback(err))</code>: appends given <code>data</code> to <code>filename</code>.</li>
<li><code>.unlink(filename, callback(err))</code>: delete file</li>
<li><code>.rename(oldFilename, newFilename, callback(err))</code></li>
</ul>


<h5>Example: Reading File via <span class="font-code">.readFile()</span></h5>
<p>For example, let us create a web server that reads the response from a file.</p>
<ol>
<li>First, create the following HTML file called &quot;<code>hello.html</code>&quot;:
<pre class="color-example">
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;&lt;title&gt;Hello&lt;/title&gt;&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;hello, world&lt;/h1&gt;
&lt;/body&gt;
&lt;/html&gt;</pre></li>

<li>Write the Node.js web app:
<pre class="color-example">
<span class="color-comment">// app2.js</span>
const http = require('http');
const fs = require('fs');  <span class="color-comment">// file system module</span>
const port = 3000;

http.createServer((req, res) =&gt; {
   fs.readFile('hello.html', (err, data) =&gt; {
      res.writeHead(200, {'Content-Type': 'text/html'});  <span class="color-comment">// set status code and MIME type</span>
      res.write(data);
      res.end();  <span class="color-comment">// end the response</span>
   });
}).listen(port, () =&gt; console.log(`Server listening at port ${port}...`));</pre></li>
<li>Run the app, as in the above example.</li>
</ol>

<h5>Asynchronous I/O</h5>
<p>Most of the I/O operations in Node.js are <em>asynchronous</em> and <em>non-blocking</em>, which is good for programming web server.</p>
<p>Try the following JavaScript:</p>
<pre class="color-example">
<span class="color-comment">// testReadFile1.js</span>
const fs = require('fs');
var content;

fs.readFile('test.txt', (err, data) =&gt; {
   if (err) throw err;
   content = data;
});

<span class="color-comment">// readFile() is asynchronous. The callback executes when the file loading has completed</span>
<span class="color-comment">// Node continues the next statement without waiting for readFile() to complete</span>
console.log(content);
<span class="color-comment">//<span class="color-output">undefined</span></span></pre>

<p>The output is an unexpected &quot;<code>undefined</code>&quot;. This is because <code>readFile()</code> is asynchronous. The callback executes only after the file loading completes. The node will not wait, but continue to the next statement.</p>

<p>In asynchronous <code>.readFile()</code>, you need to process the data inside the callback.</p>
<p>You can either (a) put your processing code inside the callback of <code>.readFile()</code>, or (b) define a function and invoke the function inside the callback, for example,</p>

<pre class="color-example">
<span class="color-comment">// testReadFile2.js</span>
const fs = require('fs');

function myReadFile(callback) {
   <span class="color-new">fs.readFile</span>('test.txt', 'utf8', (err, data) =&gt; {
      if (err) throw err;
      callback(null, data);  <span class="color-comment">// process the data upon completion of asynchronous readFile()</span>
   });
};

myReadFile((err, data) =&gt; console.log(data));</pre>


<p>A synchronous version called <code>.readFileSync()</code> is available, for example,</p>
<pre class="color-example">
<span class="color-comment">// testReadFile3.js</span>
const fs = require('fs');
const content = <span class="color-new">fs.readFileSync</span>('test.txt', 'utf8');
   <span class="color-comment">// without the encoding='utf8', the raw buffer is returned</span>
console.log(content);</pre>

<h5>Example:<span class="font-code"> .writeFile()</span> and <span class="font-code">.appendFile()</span></h5>

<p>The <code>.writeFile()</code> erases the existing contents, while <code>.appendFile()</code> appends after the existing contents.</p>

<pre class="color-example">
const fs = require('fs');
<span class="color-new">fs.writeFile</span>('test.txt', 'hello 123\n', (err) => {
   if (err) throw err;
   console.log('writefile() done...');
});</pre>
<pre class="color-example">
const fs = require('fs');
<span class="color-new">fs.appendFile</span>('test.txt', 'hello 456\n', (err) => {
   if (err) throw err;
   console.log('appendfile() done...');
});</pre>

<h4>URL (<span class="font-code">'url'</span>) Module</h4>
<p>The URL module can be used to parse a URL. For example,</p>

<pre class="color-example">
<span class="color-comment">// testURL.js</span>
const url = require('url');
const adr = 'http://123.4.5.6:8080/hello.html?fruit=apple&amp;beverage=coffee';
const q = <span class="color-new">url.parse</span>(adr, true);

console.log(q<span class="color-new">.host</span>);      <span class="color-comment">//123.4.5.6:8080</span>
console.log(q<span class="color-new">.pathname</span>);  <span class="color-comment">//hello.html</span>
console.log(q<span class="color-new">.search</span>);    <span class="color-comment">//?fruit=apple&amp;beverage=coffee</span>

const qdata = q<span class="color-new">.query</span>;
console.log(qdata);           <span class="color-comment">//[Object: null prototype] { fruit: 'apple', beverage: 'coffee' }</span>
console.log(qdata.beverage);  <span class="color-comment">//coffee</span>
console.log(qdata.pet);       <span class="color-comment">//undefined</span></pre>

<h4>Example 3: A Simple Static HTTP Server using <span class="font-code">'http'</span>, <span class="font-code">'url'</span> and <span class="font-code">'fs'</span></h4>

<table class="table-program">
<col class="col-line-number" />
<col class="col-program" />
<tbody>
<tr>
<td>
<pre class="text-right">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19</pre>
</td>
<td>
<pre>
<span class="color-comment">// app3.js</span>
const http = require('http');
const url  = require('url');
const fs   = require('fs');  <span class="color-comment">// file system</span>
const port = 3000;

http.createServer((req, res) =&gt; {
   let q = url.parse(req.url, true);
   let filename = &quot;.&quot; + q.pathname;
   fs.readFile(filename, (err, data) =&gt; {
      if (err) {
         res.writeHead(404, {'Content-Type': 'text/html'});
         return res.end('404 Not Found');
      }
      res.writeHead(200, {'Content-Type': 'text/html'});
      res.write(data);
      return res.end();
   });
}).listen(port, () =&gt; console.log(`Server listening at port ${port}...`));</pre>
</td>
</tr>
</tbody>
</table>

<h5>How it Works?</h5>
<ol>
<li>In Line 7-8, we use <code>url.parse()</code> to get the filename requested.</li>
<li>If the file is not found, the callback returns a <code>'404 Not Found'</code>, with status code 404.</li>
<li>if the file is found, the callback writes out the file data, with status code 200 <code>'OK'</code>.</li>
</ol>

<h4>Events (<span class="font-code">'events'</span>) Module for Managing Node.js Events</h4>

<p>Objects in Node.js can fire events. For example, the <code>readStream</code> object fires events when opening and closing a file.</p>
<p>Node.js has a built-in module, called &quot;<code>Events</code>&quot;, where you can create, fire and attach listener to event. In addition, all event properties and methods are instances of <code>EventEmitter</code> objects. You need to create an instance of <code>EventEmitter</code> object. For example,</p>

<pre class="color-example">
<span class="color-comment">// testEvents.js</span>
const events = require('events');
const eventEmitter = new events.EventEmitter();

<span class="color-comment">// Create an event handler for hello event</span>
const myHelloEventHandler = () =&gt; console.log('someone says hello to me...');

<span class="color-comment">// Attach an event handler to an event</span>
eventEmitter.on('hello', myHelloEventHandler);

<span class="color-comment">// Fire the 'hello' event</span>
eventEmitter.emit('hello');
<span class="color-comment">//<span class="color-output">someone says hello to me...</span></span></pre>


<h4>NodeMailer (<span class="font-code">'nodemailer'</span>) Module for Sending Email</h4>
<p>The &quot;Nodemailer&quot; module simplifies sending email from Node.js.</p>
<p>To install &quot;Nodemailer&quot;:</p>
<pre class="color-command">
npm install -g nodemailer</pre>

<p>The module is installed under &quot;<code>node_modules</code>&quot; of the Node.js installed directory.</p>

<p><span class="line-heading">Error Notes</span>: If you encounter &quot;error: module not found&quot;, you may try adding the &quot;<code>node_modules</code>&quot; directory to the NODE_PATH environment variable. See &quot;<a href="NodeJS_Basics.html#nodepath">NODE_PATH</a>&quot;.</p>

<p>The following JavaScript can be used to send an email:</p>
<pre class="color-example">
<span class="color-comment">// testEmail.js</span><span class="color-comment">
// npm install -g nodemailer</span>
const nodemailer = require('nodemailer');

const transporter = nodemailer.createTransport({
   host: 'smtp.gmail.com',  <span class="color-comment">// gmail</span>
   port: 465,               <span class="color-comment">// SSL:465, TLS:587</span>
   secure: true,            <span class="color-comment">// SSL</span>
   auth: {
      user: 'your-email-address',
      pass: 'your-password'
   }
});

const mailOptions = {
   from: 'your-email-address',
   to: 'recipient-email-address',
   subject: 'Sending Email using Node.js',
   text: 'hello'
};

transporter.sendMail(mailOptions, (err, info) =&gt; {
   if (err) {
      console.log(err);
   } else {
      console.log('Email sent: ' + info.response);
   }
});</pre>

<p>You need to check your SMTP server's hostname/port, and whether SSL/TLS is used.</p>
<p>For &quot;gmail&quot;, 
 the SMTP server's hostname/port is shown. You also need to &quot;Enabled Less Secure Apps&quot;. Goto &quot;Manage your google account&quot; &rArr; security &rArr; &quot;Less secure app access&quot; &rArr; &quot;on&quot;.</p>
 
<h3>Node.js Database Programming</h3>

<h4>MySQL</h4>

<p><span class="line-heading">Reference</span>: mysql module @ <a href="https://www.npmjs.com/package/mysql">https://www.npmjs.com/package/mysql</a>.</p>

<p>I assume that you are familiar with MySQL. Otherwise, read &quot;<a href="../sql/MySQL_HowTo.html">How to Install MySQL and Get Started</a>&quot;.</p>

<p>First, create a project directory (say &quot;<code>mySQLApp</code>&quot;), initialize, and install the Node's &quot;<code>mysql</code>&quot; driver module.</p>
<pre class="color-command">
<span class="color-comment">// Create a project directory</span>
<strong>mkdir mySQLApp</strong>
<strong>cd mySQLApp</strong>

<span class="color-comment">// Initialize npm, which creates &quot;package.json&quot;</span>
<strong>npm init</strong>    <span class="color-comment">// accept the defaults</span>

<span class="color-comment">// Install Node's &quot;mysql&quot; driver package, under &quot;node_modules&quot; sub-directory</span>
<strong>npm install mysql</strong></pre>

<p><span class="line-heading">(For MySQL 8)</span> MySQL 8 uses a new <code>caching-sha2_password</code> authentication methods, which is not supported by Node's &quot;mysql&quot; module. You need to revert back to the old <code>mysql_native_password</code> method, by issuing these commands:</p>

<pre class="color-command">
ALTER USER '<em>username</em>'@'localhost' IDENTIFIED WITH mysql_native_password BY '<em>password</em>';
flush privileges;</pre>

<h5>Example 1: Connecting to the MySQL Database Server</h5>

<table class="table-program">
<col class="col-line-number" />
<col class="col-program" />
<tbody>
<tr>
<td>
<pre class="text-right">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31</pre>
</td>
<td>
<pre>
<span class="color-comment">// testSqlConnect.js</span>
const mysql = require('mysql');

<span class="color-comment">// Create database connection</span>
const conn = mysql.createConnection({
   host: 'localhost',
   port: '3306',
   user: 'username',
   password: 'xxxxxxxx'
});

<span class="color-comment">// Connect to the MySQL Database server</span>
conn.connect(err =&gt; {
   if (err) throw err;
   console.log('connected...');

   <span class="color-comment">// Run a SELECT query</span>
   let sql = `SELECT 1 + 1 AS ans`;
   conn.query(sql, (err, rset, fields) =&gt; {
      if (err) throw err;
      console.log(rset);  <span class="color-comment">// debugging</span>
      console.log(fields);   <span class="color-comment">// debugging</span>
      console.log('The ans is: ', rset[0].ans);

      <span class="color-comment">// Close the database connection</span>
      conn.end(err =&gt; {
         if (err) throw err;
         console.log('disconnected...');
      });
   });
});</pre>
</td>
</tr>
</tbody>
</table>

<p>Start a CMD/Terminal/Bash and launch MySQL server:</p>

<pre class="color-command">
<span class="color-comment">// Start MySQL Server</span>
<strong>cd /<em>path</em>/<em>to</em>/<em>mysql</em>/bin</strong>
<strong>mysqld --console</strong></pre>

<p>Start &quot;another&quot; CMD/Terminal/Bash to run the JavaScript:</p>
<pre class="color-command">
<strong>node testMysqlConnect.js</strong>
<span class="color-output">connected...
[ RowDataPacket { ans: 2 } ]   <span class="color-comment">// the result set</span>
[ FieldPacket {   <span class="color-comment">// Each column or field heading of the result set</span>
    catalog: 'def',
    db: '',
    table: '',
    orgTable: '',
    name: 'ans',
    ...
  }
]
The ans is:  2
disconnected...</span></pre>

<p>How it Works?</p>
<ol>
<li>[TODO]</li>
<li>[TODO]</li>
</ol>

<h5>Example 2: CREATE TABLE, SELECT, INSERT, UPDATE and DELETE</h5>

<p>First, use a MySQL client to create a database called &quot;<code>coffeeshop</code>&quot;:</p>

<pre class="color-command">
CREATE DATABASE IF NOT EXISTS coffeeshop;</pre>

<p>Write and Run the JavaScript:</p>

<table class="table-program">
<col class="col-line-number" />
<col class="col-program" />
<tbody>
<tr>
<td>
<pre class="text-right">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105</pre>
</td>
<td>
<pre>
<span class="color-comment">// testSqlSelect.js</span>
const mysql = require('mysql');

<span class="color-comment">// Create database connection</span>
const conn = mysql.createConnection({
   host: 'localhost',
   port: '3306',
   user: 'username',
   password: 'xxxxxxxx',
   database: &quot;coffeeshop&quot;  <span class="color-comment">// database to be used</span>
});

<span class="color-comment">// Connect to the MySQL Database server</span>
conn.connect(err =&gt; {
   if (err) throw err;
   console.log('connected...');

   <span class="color-comment">// Create Table</span>
   let sql = `CREATE TABLE IF NOT EXISTS beverage (
      id INT UNSIGNED NOT NULL AUTO_INCREMENT,
      name VARCHAR(30) NOT NULL DEFAULT '',
      price DECIMAL(5,2) NOT NULL DEFAULT 999.99,
      PRIMARY KEY (id))`;
   conn.query(sql, (err, result) =&gt; {
      if (err) throw err;
      console.log(result);  <span class="color-comment">// debugging</span>
      <span class="color-comment">//<span class="color-output">OkPacket {</span></span>
      <span class="color-comment">//</span><span class="color-output">  fieldCount: 0,</span>
      <span class="color-comment">//<span class="color-output">  affectedRows: 0,</span></span>
      <span class="color-comment">//<span class="color-output">  insertId: 0,</span></span>
      <span class="color-comment">//</span><span class="color-output">  serverStatus: 2,</span>
      <span class="color-comment">//<span class="color-output">  warningCount: 1,</span></span>
      <span class="color-comment">//<span class="color-output">  message: '',</span></span>
      <span class="color-comment">//<span class="color-output">  protocol41: true,</span></span>
      <span class="color-comment">//<span class="color-output">  changedRows: 0</span></span>
      <span class="color-comment">//<span class="color-output">}</span></span>
      console.log('created table...');

      <span class="color-comment">// Insert Rows</span>
      let sql = `INSERT INTO beverage VALUES
         (NULL, 'Espresso', 5.5),
         (NULL, 'Cappuccino', 5.6),
         (NULL, 'Latte', 5.7)`;
      conn.query(sql, (err, result) =&gt; {
         if (err) throw err;
         console.log(result);  <span class="color-comment">// debugging</span>
         <span class="color-comment">//<span class="color-output">OkPacket {</span></span>
         <span class="color-comment">//<span class="color-output">  fieldCount: 0,</span></span>
         <span class="color-comment">//<span class="color-output">  affectedRows: 3,</span></span>
         <span class="color-comment">//<span class="color-output">  insertId: 4,</span></span>
         <span class="color-comment">//<span class="color-output">  serverStatus: 2,</span></span>
         <span class="color-comment">//<span class="color-output">  warningCount: 0,</span></span>
         <span class="color-comment">//<span class="color-output">  message: '&amp;Records: 3  Duplicates: 0  Warnings: 0',</span></span>
         <span class="color-comment">//<span class="color-output">  protocol41: true,</span></span>
         <span class="color-comment">//<span class="color-output">  changedRows: 0</span></span>
         <span class="color-comment">//<span class="color-output">}</span></span>
         console.log(result.message);
         console.log('insert id is: ' + result.insertId);

         <span class="color-comment">// Select all rows</span>
         let sql = `SELECT * FROM beverage`;
         conn.query(sql, (err, rset, fields) =&gt; {
            if (err) throw err;
            console.log(fields);  <span class="color-comment">// debugging</span>
            <span class="color-comment">//<span class="color-output">[</span></span>
            <span class="color-comment">//<span class="color-output">  FieldPacket {</span></span>
            <span class="color-comment">//<span class="color-output">    catalog: 'def',</span></span>
            <span class="color-comment">//<span class="color-output">    db: 'coffeeshop',</span></span>
            <span class="color-comment">//<span class="color-output">    table: 'beverage',</span></span>
            <span class="color-comment">//<span class="color-output">    orgTable: 'beverage',</span></span>
            <span class="color-comment">//<span class="color-output">    name: 'id',</span></span>
            <span class="color-comment">//<span class="color-output">    orgName: 'id',</span></span>
            <span class="color-comment">//<span class="color-output">    ......</span></span>
            <span class="color-comment">//<span class="color-output">  },</span></span>
            <span class="color-comment">//<span class="color-output">  FieldPacket {</span></span>
            <span class="color-comment">//<span class="color-output">    name: 'name',</span></span>
            <span class="color-comment">//<span class="color-output">    ......</span></span>
            <span class="color-comment">//<span class="color-output">  },</span></span>
            <span class="color-comment">//<span class="color-output">  FieldPacket {</span></span>
            <span class="color-comment">//<span class="color-output">    name: 'price',</span></span>
            <span class="color-comment">//<span class="color-output">    ......</span></span>
            <span class="color-comment">//<span class="color-output">  }</span></span>
            <span class="color-comment">//<span class="color-output">]</span></span>
            console.log(rset); <span class="color-comment">// debugging</span>
            <span class="color-comment">//<span class="color-output">[</span></span>
            <span class="color-comment">//<span class="color-output">  RowDataPacket { id: 1, name: 'Espresso', price: 5.5 },</span></span>
            <span class="color-comment">//<span class="color-output">  RowDataPacket { id: 2, name: 'Cappuccino', price: 5.6 },</span></span>
            <span class="color-comment">//<span class="color-output">  RowDataPacket { id: 3, name: 'Latte', price: 5.7 },</span></span>
            <span class="color-comment">//<span class="color-output">]</span></span>

            <span class="color-comment">// Processing the result set</span>
            rset.forEach((item, index) =&gt; console.log(`${item.name}, ${item.price}`));
            <span class="color-comment">//<span class="color-output">Espresso, 5.5</span></span>
            <span class="color-comment">//<span class="color-output">Cappuccino, 5.6</span></span>
            <span class="color-comment">//<span class="color-output">Latte, 5.7</span></span>

            <span class="color-comment">// Close the database connection</span>
            conn.end(err =&gt; {
            if (err) throw err;
               console.log('disconnected...');
            });
         });
      });
   });
});</pre>
</td>
</tr>
</tbody>
</table>

<p>How it Works?</p>
<ol>
<li>[TODO]</li>
<li>[TODO]</li>
</ol>

<h5>Example 3: Prepared Statement (to Prevent SQL Injection)</h5>

<table class="table-program">
<col class="col-line-number" />
<col class="col-program" />
<tbody>
<tr>
<td>
<pre class="text-right">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38</pre>
</td>
<td>
<pre>
<span class="color-comment">// testSqlPrepared.js</span>
const mysql = require('mysql');

<span class="color-comment">// Create database connection</span>
const conn = mysql.createConnection({
   host: 'localhost',
   port: '3306',
   user: 'username',
   password: 'xxxxxxxx',
   database: &quot;coffeeshop&quot;  <span class="color-comment">// database to be used</span>
});

<span class="color-comment">// Connect to the MySQL Database server</span>
conn.connect(err =&gt; {
   if (err) throw err;
   console.log('connected...');

   <span class="color-comment">// Select all rows</span>
   let sql = `<span class="color-new">SELECT * FROM beverage WHERE price &lt; ?</span>`;  <span class="color-comment">// ? for placeholder</span>
   conn.query(sql, <span class="color-new">[5.6]</span>, (err, rset, fields) =&gt; {      <span class="color-comment">// Array gives the actual parameters</span>
      if (err) throw err;
      <span class="color-comment">//console.log(fields);  // debugging</span>
      console.log(rset);    <span class="color-comment">// debugging</span>
      <span class="color-comment">//<span class="color-output">[</span></span>
      <span class="color-comment">//</span><span class="color-output">  RowDataPacket { id: 1, name: 'Espresso', price: 5.5 },</span>
      <span class="color-comment">//<span class="color-output">]</span></span>

      <span class="color-comment">// Processing the result set</span>
      rset.forEach((item, index) =&gt; console.log(`${item.name}, ${item.price}`));
      <span class="color-comment">//<span class="color-output">Espresso, 5.5</span></span>

      <span class="color-comment">// Close the database connection</span>
      conn.end(err =&gt; {
      if (err) throw err;
         console.log('disconnected...');
      });
   });
});</pre>
</td>
</tr>
</tbody>
</table>

<p>How it Works?</p>
<ol>
<li>[TODO]</li>
<li>[TODO]</li>
</ol>


<h5>Example 4: Commit and Rollback</h5>
<p>[TODO]</p>

<h4>MongoDB</h4>

<p>I assume that you are familiar with MongoDB. Otherwise, read &quot;<a href="../sql/mongoDB_GetStarted.html">MongoDB Get Started</a>&quot;.</p>

<p>First, create a project directory (say &quot;<code>myMongoApp</code>&quot;), initialize, and install the Node's MongoDB &quot;<code>mongodb</code>&quot; driver module.</p>
<pre class="color-command">
<span class="color-comment">// Create a project directory</span>
<strong>mkdir myMongoApp</strong>
<strong>cd myMongoApp</strong>

<span class="color-comment">// Initialize npm, which creates &quot;package.json&quot;</span>
<strong>npm init</strong>    <span class="color-comment">// accept the defaults</span>

<span class="color-comment">// Install Node's &quot;mongodb&quot; driver package, under &quot;node_modules&quot; sub-directory</span>
<strong>npm install mongodb</strong></pre>


<h5>Example 1: Connect to the MongoDB Database Server</h5>

<p>[TODO]</p>


<h3>NPM (Node Package Manager)</h3>

<p>npm (Node Package Manager) is the most important tool for working with Node applications. It manages the Node and JavaScript packages, and can also be used to run tests and tools used in the development process. npm is installed together with Node.js. It consists of a program, also called <code>npm</code>, and a registry for managing packages.</p>
<p>npm uses a definition file called &quot;<code>package.json</code>&quot; to manage the package dependencies. It lists all the dependencies of a package, including name, version, description, initial file to execute, production dependencies, development dependencies, version of Node it can work with, and etc. It contains everything npm needs to fetch and run your application.</p>

<h4 id="NodeProjectSetup">Setup a Node Project</h4>

<ol>
<li>Create a project directory, say <code>myNodeApp</code>:
<pre class="color-command">
<strong>mkdir myNodeApp</strong>
<strong>cd myNodeApp</strong></pre></li>

<li>Use the &quot;<code>npm init</code>&quot; to create a &quot;<code>package.json</code>&quot; file for this app. It will prompt you for a number of things. Accept the defaults for the time being.
  <pre class="color-command">
<strong>npm init</strong>
package name: (mynodeapp)
version: (1.0.0)
description:
entry point: (index.js)
test command:
git repository:
keywords:
author:
license: (ISC)
About to write to ...\myNodeApp\package.json:
{
  &quot;name&quot;: &quot;mynodeapp&quot;,
  &quot;version&quot;: &quot;1.0.0&quot;,
  &quot;description&quot;: &quot;&quot;,
  &quot;main&quot;: &quot;index.js&quot;,
  &quot;scripts&quot;: {
    &quot;test&quot;: &quot;echo \&quot;Error: no test specified\&quot; && exit 1&quot;
  },
  &quot;author&quot;: &quot;&quot;,
  &quot;license&quot;: &quot;ISC&quot;
}</pre>
Inspect the &quot;<code>package.json</code>&quot; created under the project directory.<br />
Note: You might also initialize Git via &quot;<code>git init</code>&quot;.</li>

<li>Install your desired packages via &quot;<code>npm install</code>&quot;, for example, &quot;express&quot;:
  <pre class="color-command">
<strong>npm install express</strong>
<span class="color-output">......
+ express@4.17.1
added 50 packages from 37 contributors and audited 126 packages</span></pre>
Inspect the &quot;<code>package.json</code>&quot;, which added the dependencies:
<pre class="color-example">
{
  &quot;name&quot;: &quot;mynodeapp&quot;,
  &quot;version&quot;: &quot;1.0.0&quot;,
  ......
  <span class="color-new">&quot;dependencies&quot;: {
    &quot;express&quot;: &quot;^4.17.1&quot;
  }</span>
}</pre>
The package is installed under the &quot;<code>node_modules</code>&quot; sub-directory of the project directory.</li>

<li>To use the module, invoke require() function to include it in your application:
<pre class="color-command">
const express = <span class="color-new">require</span>('express');  <span class="color-comment">// include package</span>
const app = express();               <span class="color-comment">// using package</span>
......</pre>
</li>

</ol>

<h4>More on &quot;<span class="font-code">npm install</span>&quot;</h4>

<h5>Global (<span class="font-code">--global</span> or <span class="font-code">-g</span>) Option</h5>

<pre class="color-syntax">
npm install --global <em>packageName</em>
npm install <em>packageName</em></pre>

<ul>
<li>Without the <code>--global</code> (or <code>-g</code>) option, the package will be installed <em>under the current project</em> in the &quot;<code>node_modules</code>&quot; sub-directory. It is, hence, available to the current project only.</li>
<li>With the <code>--global</code> (or <code>-g</code>) option, the package will be installed under Node's &quot;<code>node_modules</code>&quot; sub-directory. It is available for all projects. Take note that you might need to set the NODE_PATH to the global &quot;<code>node_modules</code>&quot; directory.</li>
</ul>

<h5>Using locally installed packages</h5>
<p>From npm@5.2.0, npm ships with npx package which lets you run commands from a local node module or from a global one.</p>

<pre class="color-command">
npx [options] &lt;command&gt;[@version] [command-arg]...</pre>

<p>By default, npx will check whether &lt;command&gt; exists in PATH, or in the local project binaries, and execute that.</p>
<p>Calling <code>npx &lt;command&gt;</code> when <code>&lt;command&gt;</code> isn't already in your PATH will automatically install a package with that name from the NPM registry for you, and invoke it. You can prevent this behavior by providing <code>--no-install</code> option.</p>
<p>[TODO] more on npx</p>

<h5>Development (<span class="font-code">--save-dev</span>) Option</h5>
<pre class="color-syntax">
npm install --save <em>packageName</em>      <span class="color-comment">// --save is default since npm 5</span>
npm install --save-dev <em>packageName</em></pre>

<p>Some packages, such as those meant for testing, are not needed for production deployment. You could use <code>--save-dev</code> option to mark it for development only. In &quot;<code>package.json</code>&quot;, it would be listed under &quot;<code>devDependencies</code>&quot; instead of &quot;<code>dependencies</code>&quot;, e.g.,</p>

<pre class="color-example">
<span class="color-new">&quot;dependencies&quot;</span>: {
   ......
}

<span class="color-comment">// install for development only with --save-dev option, not needed for production</span>
<span class="color-new">&quot;devDependencies&quot;</span>: {
    ......
}</pre>


<h4>npm run script</h4>
<p>You can also configure npm as a <em>shorthand</em> to run a script or command, via &quot;<code>npm run</code>&quot;, under the &quot;<code>scripts</code>&quot; section of &quot;<code>package.json</code>&quot;.</p>
<p>For example, add the following lines in &quot;<code>package.json</code>&quot;:</p>
<pre class="color-example">
{
  ......
  &quot;scripts&quot;: {
    <span class="color-new">&quot;dev&quot;: &quot;node test.js&quot;,</span>
    &quot;test&quot;: &quot;echo \&quot;Error: no test specified\&quot; && exit 1&quot;
  },
  ......
}</pre>

<p>Write  a simple &quot;<code>test.js</code>&quot; as follows:</p>
<pre class="color-example">console.log('testing npm run...');
</pre>

<p>Now, try:</p>
<pre class="color-command">
<strong>npm run dev</strong>
<strong>npm run-script dev</strong>  <span class="color-comment">// same as &quot;npm run dev&quot;</span>
<strong>npm run test</strong></pre>

<p>Note: You can also use Task Runners such as Gulp and Grunt to run tests and other external tools.</p>

<h4>npm Command</h4>

<p>The executable <code>npm</code> is install under the base directory of Node.js.</p>

<pre class="color-command">
<strong>npm help</strong>
<span class="color-output">Usage: npm &lt;command&gt;
where &lt;command&gt; is one of:
    access, adduser, audit, bin, bugs, c, cache, ci, cit,
    clean-install, clean-install-test, completion, config,
    create, ddp, dedupe, deprecate, dist-tag, docs, doctor,
    edit, explore, fund, get, help, help-search, hook, i, init,
    <span class="color-new">install</span>, install-ci-test, install-test, it, link, list, ln,
    login, logout, ls, org, outdated, owner, pack, ping, prefix,
    profile, prune, publish, rb, rebuild, repo, restart, root,
    run, run-script, s, se, search, set, shrinkwrap, star,
    stars, start, stop, t, team, test, token, tst, un,
    <span class="color-new">uninstall</span>, unpublish, unstar, up, update, v, version, view,
    whoami
......</span>
</pre>

<h5>Installing a Package</h5>

<pre class="color-syntax">
<strong>npm install package-name</strong>           <span class="color-comment">// install latest version, local project</span>
<strong>npm install --global package-name</strong>  <span class="color-comment">// or -g, available to all projects</span>
<strong>npm install package-name@version</strong>   <span class="color-comment">// specific version of the package</span></pre>


<h5>Uninstalling a Package</h5>

<pre class="color-syntax">
<strong>npm uninstall package-name</strong>
<strong>npm uninstall --global package-name</strong>  <span class="color-comment">// or -g</span>
</pre>

<p>[TODO] more</p>


<p>&nbsp;</p>


<p>&nbsp;</p>
<p>&nbsp;</p>

<!-- @@ start change in v1 -->
<p class="references">REFERENCES &amp; RESOURCES</p>

<ol>
<li>Node.js mother site @ <a href="https://nodejs.org/">https://nodejs.org/.</a></li>
<li>Introduction to Node.js @ <a href="https://nodejs.dev/">https://nodejs.dev/</a>.</li>
</ol>

</div> <!-- End the content-main division -->

<div id="content-footer">
<p>Latest version tested: Node.js v12.16.1<br>
Last modified: March, 2020</p>
</div>

</div>  <!-- End the wrap-inner division -->

<!-- footer filled by JavaScript -->
<div id="footer" class="header-footer"><p>&nbsp;</p></div>

</div>  <!-- End the wrap-outer division -->
<!-- @@ end change in v1 -->
</body>
</html>
