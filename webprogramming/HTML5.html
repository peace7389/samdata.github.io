<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<!-- for responsive web design -->
<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- for SEO -->
<meta name="description" content="HTML5 and CSS3 Tutorial for the beginners">
<meta name="keywords" content="HTML5, CSS3, Tutorial, Basics, beginners">
<title>HTML5 and CSS3 Tutorial: Advanced Features</title>
	
<!-- @@ v3 header changes starts here after <title> -->
<!-- My custom CSS v3 -->
<link rel="stylesheet" href="../css/programming_notes_v3.css">
<!-- Prism Syntax Highlighter -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/themes/prism.min.css" rel="stylesheet" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/plugins/line-highlight/prism-line-highlight.min.css" rel="stylesheet" />
<!-- favicon -->
<link rel="shortcut icon" href="../favicon.ico" type="image/x-icon">
</head>

<body>

<div id="wrap-outer">

<!-- header filled by JavaScript -->
<div id="header" class="header"><p>&nbsp;</p></div>

<div id="wrap-inner">

<div id="wrap-toc">
<h5>Table of Contents <a id="show-toc" href="HTML5.html#show-toc">(Hide)</a></h5>
<div id="toc"></div>  <!-- for showing the "Table of Content" -->
</div>

<!-- @@ v3 header changes ends here before <h1> and <h2> --><div id="content-header">

<h1>HTML5 &amp; CSS3</h1>
<h2>Advanced Features</h2>

</div>

<!-- begin main content div -->
<div id="content-main">

<p>The basics features of HTML5 and CSS3 has been covered in &quot;<a href="HTML_CSS_Basics.html">HTML5/CSS3 Basics</a>&quot;. This articles covers the advanced features of HTML5/CSS3.</p>

<h3>HTML5 Data-Attributes (<code>data-*</code>)</h3>
<p>HTML5 <code>data-*</code> attributes provide a convenient way to store data in an HTML element. The stored data can be read or write using JavaScript. For example,</p>
<pre class="syntax">&lt;div data<span class="new">-lines</span>=&quot;content&quot;&gt;......&lt;/div&gt;</pre>

<p>[TODO] more examples.</p>

<h3>HTML5 Media Elements: <code>&lt;video&gt;</code> and <code>&lt;audio&gt;</code></h3>
	
<p>For example,</p>
<pre class="example">  &lt;<span class="new">video</span> controls width="600" height="480" poster="html5-logo.png"&gt;
    &lt;<span class="new">source src=&quot;myVideo.mp4&quot; type=&quot;video/mp4&quot;</span>&gt;
    Your browser does not support the video element.
  &lt;/video&gt;&lt;br&gt;&lt;br&gt;

  &lt;<span class="new">audio</span> controls autoplay&gt;
    &lt;<span class="new">source src=&quot;myAudio.mp3&quot; type=&quot;audio/mpeg&quot;</span>&gt;
    Your browser does not support the audio element.
  &lt;/audio&gt;&lt;br&gt;&lt;br&gt;</pre>

<img src="images/HTML_element_video_audio.png" alt="Audio and Video elements" width="645" height="134" class="image-left">
	
<p>Notes:</p>
<ul>
<li>To include subtitle for video:
<pre class="example">&lt;<span class="new">track</span> <span class="new">kind=&quot;subtitles&quot;</span> src="hello.en.vtt" srclang="en" label="English"&gt;</pre></li>
<li>To include caption for audio:
<pre class="example">&lt;<span class="new">track</span> <span class="new">kind=&quot;captions&quot;</span> src="hello.en.vtt" srclang="en" label="English"&gt;</pre></li>
<li>To autoplay in loop and muted (as background):
  <pre class="example">&lt;video <span class="new">autoplay muted loop</span> ...&gt;</pre></li>
</ul>

<h3>CSS Transform, Animation, and More</h3>
<h4>CSS <code>transition</code> Property</h4>
<p>The CSS transition property specifies how to transit a property (such as <code>color</code>, <code>height</code>, etc.) into its target value. It has these 4 properties:</p>
<ul>
<li><span class="lead-code">transition-property</span>: the CSS property (e.g., <code>color</code>, <code>weight</code>) to be transitioned, or <code>all</code> if all the transitionable properties need to be transitioned.</li>
<li><span class="lead-code">transition-duration</span>: in second (<code>s</code>) or millisecond (<code>ms</code>).</li>
<li><span class="lead-code">transition-timing-function: ease|ease-in|ease-out|ease-in-out|linear|cubic-bezier()|steps()</span>: the function describes how the intermediate values during the transition are calculated.</li>
<li><span class="lead-code">transition-delay</span>: delay in second (<code>s</code>) or millisecond (<code>ms</code>) before the transition starts.</li>
<li><span class="lead-code">(Shorthand) transition: <em>property duration timing-function delay</em></span></li>
</ul>
	
<h5>Example 1:</h5>
<pre class="example">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
  &lt;meta charset="utf-8"&gt;
  &lt;title&gt;Test CSS "transition" Property&lt;/title&gt;
  &lt;style&gt;
    <span class="new">.bg-transition {
      transition: background-color 5s; <span class="comment">/* shorthand for: property duration */</span>
    }</span>
    div:hover {
      <span class="new">background-color: red;</span>  <span class="comment">/* apply transition from normal to this value */</span>
    }
    div {
      <span class="new">background-color: lightgray;</span>  <span class="comment">/* normal state */</span>
      width: 200px;
      height: 100px;
    }
  &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
  <span class="new">&lt;div class=&quot;bg-transition&quot;&gt;&lt;/div&gt;</span>
&lt;/body&gt;
&lt;/html&gt;</pre>
	
<p>When the mouse pointer hovers over the element, the background color transitions from normal state to the new value in 5 second.</p>

<h5>Example 2</h5>
<p>Three properties are transitioned in this example, with various durations and delays.</p>

<pre class="example">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
  &lt;meta charset="utf-8"&gt;
  &lt;title&gt;Test CSS "transition" Property&lt;/title&gt;
  &lt;style&gt;
    <span class="new">.transition {
      transition-property: height, width, background-color;
      transition-duration: 1s, 1s, 5s;
      transition-timing-function: linear;
      transition-delay: 0s, 1s, 0s;
    }</span>
    .transition-all {
      transition: <span class="new">all</span> 3s;  <span class="comment">/* all transitionable properties */</span>
    }
    div:hover {
      height: 200px;
      width: 200px;
      background-color: red;
    }
    div {
      background-color: lightgray;
      width: 100px;
      height: 100px;
      margin: 10px;
    }
  &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
  <span class="new">&lt;div class=&quot;transition&quot;&gt;&lt;/div&gt;
  &lt;div class=&quot;transition-all&quot;&gt;&lt;/div&gt;</span>
&lt;/body&gt;
&lt;/html&gt;</pre>

<h4>CSS <code>animation</code> Property with <code>@keyframes</code></h4>
<p>You can use <code>@keyframes</code> to define a set of keyframes, and use <code>animation</code> property to animate these keyframes. The animation properties include:</p>
	
<ul>
<li><span class="lead-code">animation-duration</span>: duration in second (<code>s</code>) or millisecond (<code>ms</code>)</li>
<li><span class="lead-code">animation-time-function</span>:</li>
<li><span class="lead-code">animation-delay</span>: delay in second (<code>s</code>) or millisecond (<code>ms</code>) before the animation begins.</li>
<li><span class="lead-code">animation-iteration-count: <em>number</em>|infinite</span>:</li>
<li><span class="lead-code">animation-direction</span>:</li>
<li><span class="lead-code">animation-fill-mode</span>:</li>
<li><span class="lead-code">animation-play-state</span>:</li>
<li><span class="lead-code">animation-name</span>: name of the <code>@keyframes</code></li>
<li><span class="lead-code">(Shorthand) animation: <em>duration timing-function delay iteration-count ... name</em></span></li>

</ul>
<h5>Example 1:</h5>
<pre class="example">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
&lt;meta charset="utf-8"&gt;
&lt;title&gt;Test "animation" Property&lt;/title&gt;
&lt;style&gt;
<span class="new">@keyframes kf-rainbow-background {
  0%   { background-color: red; }
  20%  { background-color: orange; }
  40%  { background-color: yellow; }
  60%  { background-color: green; }
  80%  { background-color: blue; }
  100% { background-color: violet; }
}</span>
<span class="new">.rainbow-background {
  animation: kf-rainbow-background 5s infinite;  <span class="comment">/* name duration iteration-count */</span>
}</span>
div {
  width: 200px;
  height: 100px;
}
&lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
  <span class="new">&lt;div class=&quot;rainbow-background&quot;&gt;&lt;/div&gt;</span>
&lt;/body&gt;
&lt;/html&gt;</pre>
	
<h4>CSS 2D Transforms</h4>
	
<ul>
<li><span class="lead-code">rotate(z)</span>: Rotates on z-axis byv the given angle.</li>
<li><span class="lead-code">translateX(x)|translateY(y)|translate(x,y)</span>: translate (move) on x and/or y-axis.</li>
<li><span class="lead-code">scaleX(x)|scaleY(y)|scale(x,y)</span>: scale (re-size) by the given multiples.</li>
<li><span class="lead-code">skewX(x)|skewY(y)|skew(x,y)</span>: shear by the given angle.</li>
<li><span class="lead-code">matrix()</span>: define a 2D transformation matrix.</li>
</ul>
	
<p>You can expressed angle in degrees (<code>deg</code>), gradians (<code>grad</code>), radians (<code>rad</code>) or turns (<code>turn</code>).</p>
	
<p>You can expressed length measurement in units such as <code>px</code>, or percent (<code>%</code>) which is relative to the width/height of the element under transformed.</p>
	
<h5>Example 1: <code>rotate(z)</code></h5>

<pre class="example">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
  &lt;meta charset="utf-8"&gt;
  &lt;title&gt;Test CSS 2D Transform&lt;/title&gt;
  &lt;style&gt;
    <span class="new">.rotate {
      transform: rotate(-45deg);  <span class="comment">/* negative value for counter clockwise */</span>
    }</span>
    div {
      background-color: lightblue;
      width: 200px;
      height: 40px;
    }
  &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;div&gt;Division 1&lt;/div&gt;
  <span class="new">&lt;div class=&quot;rotate&quot;&gt;Division 2&lt;/div&gt;</span>
&lt;/body&gt;
&lt;/html&gt;</pre>

<p>Observe that the transform (rotation) center is at the center of the element. You can use <code>transform-origin</code> to set the center of rotation, e.g.,</p>
<pre class="example">transform-origin: 100% 50%;   <span class="comment">/* center of right edge */</span></pre>

<h5>Example 2: <code>translate(x, y)</code></h5>
<p>Try:</p>
<pre class="example">transform: translateX(50%);</pre>
<p>Observe that the percent measurement is relative to the width of the element.</p>
	

<h5>Example 3: <code>scale(x, y)</code></h5>
<pre class="example">transform: scale(1.5, 0.5);</pre>
<p>The transform center is default to the center of the element. Also, observe that the texts inside the division is scaled too.</p>
	
<h5>Example 4: <code>skew(x,y)</code></h5>
<pre class="example">transform: skew(30deg, -20deg);</pre>
<p>Observe that the texts inside the division is skewed too.</p>

<h5>Example 5: Chained Transforms</h5>
<pre class="example">transform: rotate(-45deg) translateX(-28px);</pre>
<p>In chained transforms, the coordinate system moves with the element. This means that the <code>translateX</code> won't be horizontal but on an rotated axis. Changing the order of the rotation/translation will change the output.</p>

<h5>Drawing a Circle using <code>border-radius:50%</code></h5>
<pre class="example">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
  &lt;meta charset="utf-8"&gt;
  &lt;title&gt;Test Drawing Circle&lt;/title&gt;
  &lt;style&gt;
    <span class="new">.circle {
      border-radius: 50%;
    }</span>
    div {
      width:200px;
      height:200px;
      background-color: lightblue;
    }
  &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
  <span class="new">&lt;div class=&quot;circle&quot;&gt;&lt;/div&gt;</span>
&lt;/body&gt;
&lt;/html&gt;</pre>
<h5>CSS Bouncing Ball via 2D transform</h5>
<p>[TODO]</p>
	
<h4>CSS 3D Transforms</h4>
<ul>
<li><span class="lead-code">rotateX(x)|rotateY(y)|rotateZ(z)|rotate(x,y,z)</span>:</li>	
<li><span class="lead-code">translateX(x)|translateY(y)|translateZ(z)|translate(x,y,z)</span>:</li>
<li><span class="lead-code">perspective</span>:</li>	
</ul>
	
<h5>Example 1: 3D Perspective</h5>
<p>[TODO]</p>

<h5>Example 2: 3D Cube</h5>
<p>[TODO]</p>

<h5>Example 3: 3D Bouncing Ball</h5>
<p>[TODO]</p>

<h4>CSS Image <code>filter</code> Functions</h4>
<ul>
<li><span class="lead-code">blur(x)</span>: blur the image by <code>x</code> pixels</li>
<li><span class="lead-code">brightness(x)</span>: adjust the brightness of the image. Values above 1.0 or 100% brighten the image; otherwise darken.</li>
<li><span class="lead-code">contrast(x)</span>:</li>
<li><span class="lead-code">greyscale(x)</span>: Show image in greyscale.</li>
<li><span class="lead-code">invert(x)</span>:</li>
<li><span class="lead-code">opacity(x)</span>:</li>
<li><span class="lead-code">drop-shadow(h,v,x,y,z)</span>:</li>
<li><span class="lead-code">hue-rotate(x)|saturate(x)</span>:</li>
<li>more</li>
</ul>

<p>You can also apply multiple filters in one operation like transform.</p>
	
<h5>Example 1: <code>blue(x)</code></h5>
<pre class="example">.blur {
  <span class="new">filter: blur(3px);</span>
}</pre>
<p>Find an image to apply the above CSS style. Change the value and observe the resultant effects.</p>

<h4>CSS Counter</h4>
<p><span class="lead-code">counter-reset|counter-increment: <em>counter-name</em></span>: Reset and increment the particular counter.</p>

<h5>Example 1: Add Section number to <code>&lt;h1&gt;</code></h5>
	
<pre class="example">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
  &lt;meta charset="utf-8"&gt;
  &lt;title&gt;Test CSS Counter Property&lt;/title&gt;
  &lt;style&gt;
    <span class="new">body {
      counter-reset: h1-counter;
    }
    h1 {
      counter-increment: h1-counter;
    }
    h1::before {
      content: &quot;Section &quot; counter(h1-counter) &quot;. &quot;;
    }</span>
  &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
  <span class="new">&lt;h1&gt;Aaaa&lt;/h1&gt;
  &lt;h1&gt;Bbbb&lt;/h1&gt;
  &lt;h1&gt;Cccc&lt;/h1&gt;</span>
&lt;/body&gt;
&lt;/html&gt;</pre>
	
<p>We define a counter called <code>h1-counter</code>. We  reset the counter in <code>&lt;body&gt;</code> and increment in <code>&lt;h1&gt;</code>. We then append the counter value before the <code>&lt;h1&gt;</code> via pseudo-element <code>::before</code>.</p>
	
<h5>Example 2: Multi-Level Nested Counters for <code>&lt;h1&gt;</code> and <code>&lt;h2&gt;</code></h5>
<pre class="example">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
  &lt;meta charset="utf-8"&gt;
  &lt;title&gt;Test CSS Counter Property&lt;/title&gt;
  &lt;style&gt;
    <span class="new">body {
      counter-reset: h1-counter;
    }
    h1 {
      counter-increment: h1-counter;
      counter-reset: h2-counter;
    }
    h2 {
      counter-increment: h2-counter;
    }
    h1::before {
      content: &quot;Section &quot; counter(h1-counter) &quot;. &quot;;
    }
    h2::before {
      content: counter(h1-counter) &quot;.&quot; counter(h2-counter) &quot; &quot;;
    }</span>
  &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
  <span class="new">&lt;h1&gt;Aaaa&lt;/h1&gt;
  &lt;h2&gt;Xxxx&lt;/h2&gt;
  &lt;h2&gt;Yyyy&lt;/h2&gt;
  &lt;h1&gt;Bbbb&lt;/h1&gt;
  &lt;h2&gt;Xxxx&lt;/h2&gt;
  &lt;h1&gt;Cccc&lt;/h1&gt;</span>
&lt;/body&gt;
&lt;/html&gt;</pre>
	
<p>We define two counters: <code>h1-counter</code> and <code>h2-counter</code>, and <code>reset/increment</code> them accordingly.</p>
	
<h4>CSS Functions</h4>
<ul>
<li><span class="lead-code">calc(<em>expr</em>)</span>: accepts a mathematical expression (with <code>+</code>, <code>-</code>, <code>*</code>, <code>/</code> operators) and returns a numerical value.</li>
<li><span class="lead-code">attr(<em>name</em>)</span>: returns the value of the attribute.</li>
<li><span class="lead-code">var(<em>name</em>)</span>: returns the value of the variable. See &quot;CSS Variables&quot;</li>
<li><span class="lead-code">linear-gradient()</span>: creates a image representing a linear gradient of colors.</li>
<li><span class="lead-code">radial-gradient()</span>: create an image representing a gradient of colors radiating from the center of the gradient.</li>
</ul>
	
<h5>Example 1: <code>linear-gradient</code> and <code>radial-gradient</code> Functions</h5>
<pre class="example">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
  &lt;meta charset="utf-8"&gt;
  &lt;title&gt;Test CSS Gradient Property&lt;/title&gt;
  &lt;style&gt;
    <span class="new">.linear-gradient {
       background-image: linear-gradient(90deg, red, yellow 50%, blue, green);
          <span class="comment">/* 90deg: from left to right; 0deg: from bottom to top */</span>
    }
    .radial-gradient {
       background-image: radial-gradient(violet, red, orange, yellow);
          <span class="comment">/* from the center of element */</span>
    }</span>
    div {
      width:200px;
      height:100px;
    }
  &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
  <span class="new">&lt;div class=&quot;linear-gradient&quot;&gt;&lt;/div&gt;
  &lt;div class=&quot;radial-gradient&quot;&gt;&lt;/div&gt;</span>
&lt;/body&gt;
&lt;/html&gt;</pre>

<h4>CSS Column Layout</h4>
<p>For example,</p>
<pre class="example">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
  &lt;meta charset="utf-8"&gt;
  &lt;title&gt;Test Columns&lt;/title&gt;
  &lt;style&gt;
    <span class="new">.multi-columns {
      column-count: 2;   <span class="comment">/* or column-width:200px  */</span>
      column-gap: 40px;
      column-rule: 3px solid gray;
    }</span>
    div {
      background-color: lightblue;
    }
  &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;div class="multi-columns"&gt;ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
  tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud
  exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in
  reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint
  occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est
  laborum&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
	
<p>Instead of using <code>column-count</code> to fix the number of columns, you can also use <code>column-width</code> to set the width of the column (say 200px) and leave the number of columns to be decided by the screen width.</p>
	
<h3>HTML5 Canvas</h3>

<p>References:</p>
<ol>
<li>MDC's Canvas Tutorial @ <a href="https://developer.mozilla.org/en/Canvas_tutorial">https://developer.mozilla.org/en/Canvas_tutorial</a>.</li>
<li>WHTAWG's Canvas API specification @ <a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html">http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html</a>.</li>
</ol>

<p>Before HTML5, drawing on the browser screen usually involves absolutely position and stretching an image using CSS or using plug-ins like flash. HTML5 provides a &quot;Canvas API&quot; for drawing primitives such as line, arc, rectangle, as well as supporting transformation, just like any 2D Graphics API. Canvas is supported in most of the modern browsers, such as Firefox, Chrome, and latest IE.</p>

<p>To use canvas API, first create a canvas element via the new <code>&lt;canvas&gt;&lt;/canvas&gt;</code> tag, e.g.,</p>
	
<pre data-line="8-11,15"><code class="language-html line-numbers">&lt;!DOCTYPE html&gt;
&lt;!-- H5CanvasTest.html --&gt;
&lt;html lang="en"&gt;

&lt;head&gt;
  &lt;meta charset="utf-8"&gt;
  &lt;title&gt;Test HTML5 Canvas API&lt;/title&gt;
  &lt;style&gt;
    #canvas {
      border: 1px solid red;
    }
  &lt;/style&gt;
&lt;/head&gt;

&lt;body&gt;
  &lt;h2&gt;Testing HTML5 Canvas&lt;/h2&gt;
  &lt;canvas id="canvas" height="200" width="300"&gt;Canvas is not supported&lt;/canvas&gt;
&lt;/body&gt;

&lt;/html&gt;</code></pre>

<h5>How it Works?</h5>

<ol>
<li>[TODO]</li>
<li>The default width and height is 300 by 150 pixels.</li>
</ol>

<h4>Let's Draw Some Simple Shapes</h4>

<p>The steps of using canvas are as follows:</p>
<ol>
<li>Create a canvas using the HTML5's new <code>&lt;canvas id=&quot;canvas&quot;&gt;&lt;/canvas&gt;</code> tag with a unique <code>id</code>.</li>

<li>Write a JavaScript:
<ol>
<li>Use <code>canvas = document.getElementById(&quot;canvas&quot;)</code> to select the canvas element.</li>
<li>Use <code>context = canvas.getContext(&quot;2d&quot;)</code> to get the 2D drawing context. Currently, only 2D context is supported.</li>
<li>You can use the <code>context</code> to draw shapes and perform transformation.</li>
</ol></li>
</ol>

<h5>Example: Draw/Fill a Rectangle, a Triangle and a Circle</h5>

<img class="image-left" src="images/HTML5_DrawShapes.png" alt="HTML Canvas Example">

<pre data-line="9-11,14-48,53"><code class="language-html line-numbers">&lt;!DOCTYPE html&gt;
&lt;!-- H5CanvasDrawPrimitives.html --&gt;
&lt;html lang="en"&gt;

&lt;head&gt;
  &lt;meta charset="utf-8"&gt;
  &lt;title&gt;HTML5 Drawing Primitive Shapes&lt;/title&gt;
  &lt;style&gt;
    #canvas {
      border: 1px solid red;
    }
  &lt;/style&gt;

  &lt;script&gt;
    window.addEventListener("load", draw, true);

    function draw() {
      // Retrieve the canvas element and set its CSS style
      let canvas = document.getElementById("canvas");
      canvas.width = 500;
      canvas.height = 300;
      // Get the 2D drawing context for the canvas element
      let context = canvas.getContext("2d");

      // Draw a Rectangle using the rect primitive
      context.fillStyle = "rgb(0, 255, 0)";
      context.fillRect(30, 80, 100, 120);  // x, y, width, height
      context.strokeStyle = "#0000FF";
      context.strokeRect(30, 80, 100, 120);

      // Draw a triangle using path
      context.beginPath();
      context.moveTo(150, 50);
      context.lineTo(200, 180);
      context.lineTo(100, 180);
      context.closePath();
      context.fillStyle = "rgba(0, 0, 255, 0.5)";  // transparent
      context.fill();
      context.stroke();

      // Fill a circle using path
      context.beginPath();
      // centerX, centerY, radius, beginAngle, engAngle, antiClockwise
      context.arc(220, 180, 50, 0, Math.PI * 2, true);
      context.fillStyle = "red";
      context.fill();  // closePath() implicitly
    }
  &lt;/script&gt;
&lt;/head&gt;

&lt;body&gt;
  &lt;h2&gt;HTML5 Drawing Primitive Shapes&lt;/h2&gt;
  &lt;canvas id="canvas"&gt;Canvas is not supported&lt;/canvas&gt;
&lt;/body&gt;

&lt;/html&gt;</code></pre>
	

<h5>How it Works?</h5>

<p>[TODO]</p>

<p>To check if canvas is supported, you could use the following script:</p>
<pre class="example">
let canvas = document.getElementById(&quot;canvasID&quot;);
if (canvas.getContext){
  let context = canvas.getContext(&quot;2d&quot;);
  <span class="comment">// drawing codes here</span>
} else {
  <span class="comment">// canvas-unsupported codes here</span>
}</pre>

<h4>Draw/Fill Primitive Shapes</h4>

<ul>
  <li>Coordinate System: The origin (0, 0) is at the top-left corner, with x-axis pointing to the right and y-axis pointing downward. This is consistent with most 2D graphics system.</li>
  <li>Color and Style:
    <pre class="syntax">attribute any strokeStyle; <span class="comment">// default black</span>
attribute any fillStyle;   <span class="comment">// default black</span></pre>
Color can be specified via &quot;<code>#rrggbb</code>&quot; (from &quot;<code>#000000</code>&quot; to &quot;<code>#FFFFFF</code>&quot;), &quot;<code>rgb(r, g, b)</code>&quot;, &quot;<code>rgba(r, g, b, a)</code>&quot; (where <code>0&le;r,g,b&le;255</code> and <code>0&le;a&le;1</code> specifies the transparency), or CSS color literals (such as &quot;<code>red</code>&quot;, &quot;<code>green</code>&quot;, &quot;<code>blue</code>&quot;).</li>

<li>Rectangle: The canvas API supports only one primitive shape - rectangle.  All the other shapes are formed using path.
  <pre class="syntax">void clearRect(double topLeftX, double topLeftY, double width, double height);
  <span class="comment">// Clear the rectangular area, i.e., set to transparent.</span>
void fillRect(double topLeftX, double topLeftY, double width, double height);
  <span class="comment">// Fill the rectangular area with fillStyle.</span>
void strokeRect(double topLeftX, double topLeftY, double width, double height);
  <span class="comment">// Draw the outline of the rectangle, with strokeStyle.</span></pre>
</li>

<li>Path: These steps are need to render using path:

<ol>
  <li>Call the <code>beginPath()</code> to start a path, which may contain many sub-paths (such as line, arc). The <code>beginPath()</code> resets (clears) the sub-path list.</li>
  <li>Define a path using <code>rect()</code>, <code>arc()</code>, or <code>xxxTo()</code>.</li>
  <li>Optionally call the <code>closePath()</code> to form a close loop, i.e., join the last point to the first point with a straight line.</li>
  <li>Invoke <code>fill()</code> and/or <code>stroke()</code> to fill the path or render the outline. If <code>fill()</code> is used, the open shape will be closed and there is no need to <code>closePath()</code>.</li>
  </ol>

  <pre class="syntax">void beginPath();
  <span class="comment">// Start a path, clear the sub-path list</span>
void closePath();
  <span class="comment">// Join the last point and the first point with a straight line.</span>
 
void moveTo(double x, double y);
  <span class="comment">// Position without joining with previous point.</span>

void lineTo(double x, double y);
void arcTo(double x1, double y1, double x2, double y2, double radius); 
void quadraticCurveTo(double cpx, double cpy, double x, double y);
void bezierCurveTo(double cp1x, double cp1y, double cp2x, double cp2y, double x, double y);
void rect(double x, double y, double w, double h);
void arc(double x, double y, double radius, double startAngle, double endAngle, optional boolean anticlockwise);
  <span class="comment">// various Path: line, arc, curves, shape</span>
 
void fill();    <span class="comment">// Fill the shape enclosed by the path</span>
void stroke();  <span class="comment">// Draw the outline</span>
</pre>
</li>
</ul>

<h4>Transformation</h4>

<p>The commonly-used JavaScript functions for transformation are:</p>

<pre class="syntax">void save();     <span class="comment">// push state on state stack</span>
void restore();  <span class="comment">// pop state stack and restore state</span>
 
void translate(double x, double y);
void rotate(double angle);
void scale(double x, double y);
void transform(double m11, double m12, double m21, double m22, double dx, double dy);
void setTransform(double m11, double m12, double m21, double m22, double dx, double dy);</pre>

<p>The default transform is the identity matrix.</p>

<h5>Example</h5>

<img class="image-left" src="images/HTML5_Transform.png" alt="HTML Canvas Example">

<pre data-line="9-11,14-50,55"><code class="language-html line-numbers">&lt;!DOCTYPE html&gt;
&lt;!-- H5CanvasTransform.html --&gt;
&lt;html lang="en"&gt;

&lt;head&gt;
  &lt;meta charset="utf-8"&gt;
  &lt;title&gt;HTML5 Transformation&lt;/title&gt;
  &lt;style&gt;
    #canvas {
      border: 1px solid red;
    }
  &lt;/style&gt;

  &lt;script&gt;
    window.addEventListener("load", draw, true);

    function draw() {
      // Retrieve the canvas element and set its CSS style
      let canvas = document.getElementById("canvas");
      canvas.width = 300;
      canvas.height = 200;
      // Get the 2D drawing context for the canvas element
      let context = canvas.getContext("2d");

      context.save();  // save the state
      context.translate(100, 50);
      fillTriangle(context);  // default styles;

      context.translate(120, 25);
      fillTriangle(context);
      let i;
      for (i = 0; i &lt; 8; i++) {
        context.rotate(Math.PI / 6);
        context.fillStyle = "rgba(0, " + (i * 25) + ", 0, 0.5)";
        fillTriangle(context);
      }

      context.restore();  // restore the saved state
      context.scale(1.5, 1.5);
      fillTriangle(context);
    }

    function fillTriangle(context) {
      context.beginPath();
      context.moveTo(0, 0);
      context.lineTo(50, 0);
      context.lineTo(25, 50);
      context.fill();
    }
  &lt;/script&gt;
&lt;/head&gt;

&lt;body&gt;
  &lt;h2&gt;HTML5 Transformation&lt;/h2&gt;
  &lt;canvas id="canvas"&gt;Canvas is not supported&lt;/canvas&gt;
&lt;/body&gt;

&lt;/html&gt;</code></pre>
	
<h5>How It Works?</h5>

<ol>
<li>We usually invoke <code>save()</code> to push the state of the canvas onto the stack. The state includes all the transforms applied so far, the styles and the clipping path. We can restore the state via <code>restore()</code>, which pops the saved state from the stack.</li>

<li><code>Translate()</code>, <code>rotate()</code> and <code>scale()</code> are referenced to the current origin, after the latest transform. Rotation is anti-clockwise measured in radian.</li>

<li>The function <code>transform(m11, m12, m21, m22, dx, dy)</code> multiplies the current transform by the given transformation matrix:
<pre class="example">
m11 m12  dx
m21 m22  dy
  0   0   1</pre>

where <code>(m11, m12, m21, m22)</code> represents the rotation and <code>(dx, dy)</code> represents translation.<br>
The <code>setTransform(m11, m12, m21, m22, dx, dy)</code> set the transform to the given matrix, i.e., it resets the current transform to identity and then apply the <code>transform()</code> function.</li>

</ol>

<h4>Using Images</h4>

<p>To draw an image on the canvas: Find a reference to an image object or other canvas object as a source, and invoke <code>drawImage()</code> function. </p>
<p>You can construct an image reference and draw the image onto the canvas as follows:</p>

<pre class="example">
let myImg = new Image();      <span class="comment">// Create a new &lt;img&gt; element</span>
myImg.src = &quot;imageFilename&quot;;  <span class="comment">// Set source path</span>
myImg.onload = function() {   <span class="comment">// Wait till the image is loaded</span>
  <span class="comment">// Do drawImage here</span>
  drawImage(myImg, 0, 0);
  ......
};</pre>

<p>You can also get an image reference via <code>document.images</code> property, or functions <code>document.getElementsByTagName(&quot;img&quot;)</code>, <code>document.getElementById(&quot;imageID&quot;)</code>.</p>

<h5>Example:</h5>

<p>[TODO]</p>

<pre class="syntax">void drawImage(HTMLImageElement image, double x, double y);
  <span class="comment">// Draw the image with top-left corner at x and y.</span>
void drawImage(HTMLImageElement image, double x, double y, double width, double height);
  <span class="comment">// Draw and scale the image to the specified width and height.</span>
void drawImage(HTMLImageElement image, double srcX, double srcY, double srcWidth, double srcHeight, 
               double destX, double destY, double destWidth, double destHeight);
  <span class="comment">// Slice part of the source image and draw to the destination.</span>
 
void drawImage(HTMLCanvasElement image, double dx, double dy);
void drawImage(HTMLCanvasElement image, double dx, double dy, double dw, double dh);
void drawImage(HTMLCanvasElement image, double double srcX, double srcY, double srcWidth, double srcHeight, 
               double destX, double destY, double destWidth, double destHeight);
 
void drawImage(HTMLVideoElement image, double dx, double dy);
void drawImage(HTMLVideoElement image, double dx, double dy, double dw, double dh);
void drawImage(HTMLVideoElement image, double srcX, double srcY, double srcWidth, double srcHeight, 
               double destX, double destY, double destWidth, double destHeight);</pre>

<h4>Styles</h4>

<pre class="syntax"><span class="comment">// line caps/joins</span>
attribute double lineWidth;   <span class="comment">// (default 1)</span>
attribute DOMString lineCap;  <span class="comment">// &quot;butt&quot;, &quot;round&quot;, &quot;square&quot; (default &quot;butt&quot;)</span>
attribute DOMString lineJoin; <span class="comment">// &quot;round&quot;, &quot;bevel&quot;, &quot;miter&quot; (default &quot;miter&quot;)</span>
attribute double miterLimit;  <span class="comment">// (default 10)</span></pre>

<h4>Animation</h4>
<p>Read &quot;HTML5 Bouncing Ball&quot;.</p>

<p>The steps are:</p>
<ol>
<li>Clear the canvas: via <code>fillRect()</code>.</li>
<li>Save the canvas state.</li>
<li>Draw the shape.</li>
<li>Restore the canvas state.</li>
</ol>

<p>You can use the following functions to control the timing:</p>
<ol>
<li><code>setInterval()</code>:</li>
<li><code>setTimeout()</code>: run once after the set timing expires.</li>
</ol>


<h4>Canvas API DOM Interface</h4>

<pre class="syntax">
interface <strong>HTMLCanvasElement</strong> : HTMLElement {
  attribute unsigned long width;
  attribute unsigned long height;

  DOMString toDataURL(optional DOMString type, any... args);
  void toBlob(FileCallback? callback, optional DOMString type, any... args);

  object? getContext(DOMString contextId, any... args);
};

interface <strong>CanvasRenderingContext2D</strong> {
  <span class="comment">// back-reference to the canvas</span>
  readonly attribute HTMLCanvasElement canvas;

  <span class="comment">// state</span>
  void save(); <span class="comment">// push state on state stack</span>
  void restore(); <span class="comment">// pop state stack and restore state</span>

  <span class="comment">// transformations (default transform is the identity matrix)</span>
  void scale(double x, double y);
  void rotate(double angle);
  void translate(double x, double y);
  void transform(double a, double b, double c, double d, double e, double f);
  void setTransform(double a, double b, double c, double d, double e, double f);

  <span class="comment">// compositing</span>
  attribute double globalAlpha; <span class="comment">// (default 1.0)</span>
  attribute DOMString globalCompositeOperation; <span class="comment">// (default source-over)</span>

  <span class="comment">// colors and styles</span>
  attribute any strokeStyle; <span class="comment">// (default black)</span>
  attribute any fillStyle; <span class="comment">// (default black)</span>
  CanvasGradient createLinearGradient(double x0, double y0, double x1, double y1);
  CanvasGradient createRadialGradient(double x0, double y0, double r0, double x1, double y1, double r1);
  CanvasPattern createPattern(HTMLImageElement image, DOMString repetition);
  CanvasPattern createPattern(HTMLCanvasElement image, DOMString repetition);
  CanvasPattern createPattern(HTMLVideoElement image, DOMString repetition);

  <span class="comment">// line caps/joins</span>
  attribute double lineWidth; <span class="comment">// (default 1)</span>
  attribute DOMString lineCap; <span class="comment">// &quot;butt&quot;, &quot;round&quot;, &quot;square&quot; (default &quot;butt&quot;)</span>
  attribute DOMString lineJoin; <span class="comment">// &quot;round&quot;, &quot;bevel&quot;, &quot;miter&quot; (default &quot;miter&quot;)</span>
  attribute double miterLimit; <span class="comment">// (default 10)</span>

  <span class="comment">// shadows</span>
  attribute double shadowOffsetX; <span class="comment">// (default 0)</span>
  attribute double shadowOffsetY; <span class="comment">// (default 0)</span>
  attribute double shadowBlur; <span class="comment">// (default 0)</span>
  attribute DOMString shadowColor; <span class="comment">// (default transparent black)</span>

  <span class="comment">// rects</span>
  void clearRect(double x, double y, double w, double h);
  void fillRect(double x, double y, double w, double h);
  void strokeRect(double x, double y, double w, double h);

  <span class="comment">// path API</span>
  void beginPath();
  void closePath();
  void moveTo(double x, double y);
  void lineTo(double x, double y);
  void quadraticCurveTo(double cpx, double cpy, double x, double y);
  void bezierCurveTo(double cp1x, double cp1y, double cp2x, double cp2y, double x, double y);
  void arcTo(double x1, double y1, double x2, double y2, double radius); 
  void rect(double x, double y, double w, double h);
  void arc(double x, double y, double radius, double startAngle, double endAngle, optional boolean anticlockwise); 
  void fill();
  void stroke();
  void drawSystemFocusRing(Element element);
  boolean drawCustomFocusRing(Element element);
  void scrollPathIntoView();
  void clip();
  boolean isPointInPath(double x, double y);

  <span class="comment">// text</span>
  attribute DOMString font; <span class="comment">// (default 10px sans-serif)</span>
  attribute DOMString textAlign; <span class="comment">// &quot;start&quot;, &quot;end&quot;, &quot;left&quot;, &quot;right&quot;, &quot;center&quot; (default: &quot;start&quot;)</span>
  attribute DOMString textBaseline; <span class="comment">// &quot;top&quot;, &quot;hanging&quot;, &quot;middle&quot;, &quot;alphabetic&quot;, &quot;ideographic&quot;, &quot;bottom&quot; (default: &quot;alphabetic&quot;)</span>
  void fillText(DOMString text, double x, double y, optional double maxWidth);
  void strokeText(DOMString text, double x, double y, optional double maxWidth);
  TextMetrics measureText(DOMString text);

  <span class="comment">// drawing images</span>
  void drawImage(HTMLImageElement image, double dx, double dy);
  void drawImage(HTMLImageElement image, double dx, double dy, double dw, double dh);
  void drawImage(HTMLImageElement image, double sx, double sy, double sw, double sh, double dx, double dy, double dw, double dh);
  void drawImage(HTMLCanvasElement image, double dx, double dy);
  void drawImage(HTMLCanvasElement image, double dx, double dy, double dw, double dh);
  void drawImage(HTMLCanvasElement image, double sx, double sy, double sw, double sh, double dx, double dy, double dw, double dh);
  void drawImage(HTMLVideoElement image, double dx, double dy);
  void drawImage(HTMLVideoElement image, double dx, double dy, double dw, double dh);
  void drawImage(HTMLVideoElement image, double sx, double sy, double sw, double sh, double dx, double dy, double dw, double dh);

  <span class="comment">// pixel manipulation</span>
  ImageData createImageData(double sw, double sh);
  ImageData createImageData(ImageData imagedata);
  ImageData getImageData(double sx, double sy, double sw, double sh);
  void putImageData(ImageData imagedata, double dx, double dy);
  void putImageData(ImageData imagedata, double dx, double dy, double dirtyX, double dirtyY, double dirtyWidth, double dirtyHeight);
};

interface <strong>CanvasGradient</strong> {
  <span class="comment">// opaque object</span>
  void addColorStop(double offset, DOMString color);
};

interface <strong>CanvasPattern</strong> {
  <span class="comment">// opaque object</span>
};

interface <strong>TextMetrics</strong> {
  readonly attribute double width;
};

interface <strong>ImageData</strong> {
  readonly attribute unsigned long width;
  readonly attribute unsigned long height;
  readonly attribute Uint8ClampedArray data;
};</pre>

<!--
<h3>HTML5 Audio and Video</h3>
<p>[TODO]</p>

<h3>HTML5 Geolocation API</h3>
<p>[TODO]</p>

<h3>HTML5 Communication API</h3>
<p>[TODO]</p>

<h3>HTML5 WebSocket API</h3>
<p>[TODO]</p>

<h3>HTML5 Form API</h3>
<p>[TODO]</p>

<h3>HTML5 Web Workers API</h3>
<p>[TODO]</p>

<h3>HTML5 Web Storage API</h3>
<p>[TODO]</p>

<h3>HTML5 Offline Applications</h3>
<p>[TODO]</p>
-->

<!-- @@ v3 footer changes starts here, before references, to end of document -->

<p>&nbsp;</p>
<a class="references" href="../howto/References.html#javascript">Link To JavaScript/jQuery References &amp; Resources</a>

</div> <!-- End the content-main division -->

<div id="content-footer">
<p>Last modified: June 2015</p>
</div>

</div>  <!-- End the wrap-inner division -->

<!-- footer filled by JavaScript -->
<div id="footer" class="footer"><p>&nbsp;</p></div>

</div>  <!-- End the wrap-outer division -->

<!-- jQuery -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<!-- My custom JavaScript v3 -->
<script src="../scripts/programming_notes_v3.js"></script>
<!-- Prism Syntax Highlighter -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/plugins/line-highlight/prism-line-highlight.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/plugins/autoloader/prism-autoloader.min.js"></script>
</body>
</html>
